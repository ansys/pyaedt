
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyaedt.modules.solutions &#8212; PyAEDT</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css\ansys_sphinx_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../../../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../../../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
    <img src="../../../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../../../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../Getting_started/index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../User_guide/index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../API/index.html">
  AEDT API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../EDBAPI/index.html">
  EDB API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../examples/index.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../Contributing.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        0.6  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables _modules/pyaedt/modules/solutions and {'json_url': 'https://aedt.docs.pyansys.com/release/versions.json', 'version_match': '0.6'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "_modules/pyaedt/modules/solutions.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://aedt.docs.pyansys.com/release/versions.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "_modules/pyaedt/modules/solutions.html";
        let btn = document.getElementById("version_switcher_button");
        // Set empty strings by default so that these attributes exist and can be used in CSS selectors
        btn.dataset["activeVersionName"] = "";
        btn.dataset["activeVersion"] = "";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 0.6.70 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "0.6") {
                node.classList.add("active");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pyaedt" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pyaedt/discussions" rel="noopener" target="_blank" title="Support"><span><i class="fa fa-comment fa-fw"></i></span>
            <label class="sr-only">Support</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
     
<div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(text => document.getElementById("announcement_msg").innerHTML = text)
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>

    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../../../index.html">PyAEDT</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> » </li>
        <li class="nav-item nav-item-this"><a href="">pyaedt.modules.solutions</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <h1>Source code for pyaedt.modules.solutions</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">pyaedt</span> <span class="kn">import</span> <span class="n">get_pyaedt_app</span>
<span class="kn">from</span> <span class="nn">pyaedt</span> <span class="kn">import</span> <span class="n">is_ironpython</span>
<span class="kn">from</span> <span class="nn">pyaedt</span> <span class="kn">import</span> <span class="n">pyaedt_function_handler</span>
<span class="kn">from</span> <span class="nn">pyaedt</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.constants</span> <span class="kn">import</span> <span class="n">AEDT_UNITS</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.constants</span> <span class="kn">import</span> <span class="n">db10</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.constants</span> <span class="kn">import</span> <span class="n">db20</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.constants</span> <span class="kn">import</span> <span class="n">unit_converter</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.general_methods</span> <span class="kn">import</span> <span class="n">check_and_download_folder</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.general_methods</span> <span class="kn">import</span> <span class="n">open_file</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.general_methods</span> <span class="kn">import</span> <span class="n">write_csv</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.plot</span> <span class="kn">import</span> <span class="n">get_structured_mesh</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.plot</span> <span class="kn">import</span> <span class="n">is_notebook</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.plot</span> <span class="kn">import</span> <span class="n">plot_2d_chart</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.plot</span> <span class="kn">import</span> <span class="n">plot_3d_chart</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.plot</span> <span class="kn">import</span> <span class="n">plot_contour</span>
<span class="kn">from</span> <span class="nn">pyaedt.generic.plot</span> <span class="kn">import</span> <span class="n">plot_polar_chart</span>
<span class="kn">from</span> <span class="nn">pyaedt.modeler.cad.elements3d</span> <span class="kn">import</span> <span class="n">FacePrimitive</span>

<span class="n">np</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">pd</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">pv</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">is_ironpython</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="n">np</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="n">pd</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="n">pv</span> <span class="o">=</span> <span class="kc">None</span>


<div class="viewcode-block" id="SolutionData"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.html#pyaedt.modules.solutions.SolutionData">[docs]</a><span class="k">class</span> <span class="nc">SolutionData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Contains information from the :func:`GetSolutionDataPerVariation` method.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aedtdata</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span> <span class="o">=</span> <span class="n">aedtdata</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_variations</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">aedtdata</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enable_pandas_output</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">enable_pandas_output</span> <span class="ow">and</span> <span class="n">pd</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_expressions</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nominal_variation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nominal_variation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_sweeps</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_variations</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_intrinsic</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">({})</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_intrinsic</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_primary_sweep</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_primary_sweep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active_variation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">units_sweeps</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">intrinsic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units_sweeps</span><span class="p">[</span><span class="n">intrinsic</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nominal_variation</span><span class="o">.</span><span class="n">GetSweepUnits</span><span class="p">(</span><span class="n">intrinsic</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units_sweeps</span><span class="p">[</span><span class="n">intrinsic</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_solutions_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ifft</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enable_pandas_output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set/Get a flag to use Pandas to export dict and lists. This applies to Solution data output.</span>
<span class="sd">        If ``True`` the property or method will return a pandas object in CPython environment.</span>
<span class="sd">        Default is ``False``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enable_pandas_output</span> <span class="ow">and</span> <span class="n">pd</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="nd">@enable_pandas_output</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">enable_pandas_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enable_pandas_output</span> <span class="ow">and</span> <span class="n">pd</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enable_pandas_output</span> <span class="o">=</span> <span class="n">val</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_solutions_data</span><span class="p">()</span>

<div class="viewcode-block" id="SolutionData.set_active_variation"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.set_active_variation.html#pyaedt.modules.solutions.SolutionData.set_active_variation">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">set_active_variation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_id</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the active variations to one of available variations in self.variations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        var_id : int</span>
<span class="sd">            Index of Variations to assign.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">var_id</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_variation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">[</span><span class="n">var_id</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nominal_variation</span> <span class="o">=</span> <span class="n">var_id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expressions</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_variations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">variations_lists</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">:</span>
            <span class="n">variations</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">({})</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">GetDesignVariableNames</span><span class="p">():</span>
                <span class="n">variations</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">GetDesignVariableValue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">variations_lists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">variations</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">variations_lists</span>

<div class="viewcode-block" id="SolutionData.variation_values"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.variation_values.html#pyaedt.modules.solutions.SolutionData.variation_values">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">variation_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variation_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the list of the specific variation available values.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        variation_name : str</span>
<span class="sd">            Name of variation to return.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">variation_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">variation_name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vars_vals</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">variation_name</span> <span class="ow">in</span> <span class="n">el</span> <span class="ow">and</span> <span class="n">el</span><span class="p">[</span><span class="n">variation_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vars_vals</span><span class="p">:</span>
                    <span class="n">vars_vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">[</span><span class="n">variation_name</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">vars_vals</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">intrinsics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get intrinsics dictionary on active variation.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">({})</span>
            <span class="n">intrinsics</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nominal_variation</span><span class="o">.</span><span class="n">GetDesignVariableNames</span><span class="p">()]</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">intrinsics</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nominal_variation</span><span class="o">.</span><span class="n">GetSweepValues</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span><span class="p">[</span><span class="n">el</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span><span class="p">[</span><span class="n">el</span><span class="p">]))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_intrinsics</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nominal_variation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Nominal variation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nominal_variation</span>

    <span class="nd">@nominal_variation</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nominal_variation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_variations</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_nominal_variation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">[</span><span class="n">val</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; not in Variations&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">primary_sweep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Primary sweep.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ps : float</span>
<span class="sd">            Perimeter of the source.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_primary_sweep</span>

    <span class="nd">@primary_sweep</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">primary_sweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ps</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ps</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_primary_sweep</span> <span class="o">=</span> <span class="n">ps</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">expressions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Expressions.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expressions</span><span class="p">:</span>
            <span class="n">mydata</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nominal_variation</span><span class="o">.</span><span class="n">GetDataExpressions</span><span class="p">()]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_expressions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">mydata</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expressions</span>

<div class="viewcode-block" id="SolutionData.update_sweeps"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.update_sweeps.html#pyaedt.modules.solutions.SolutionData.update_sweeps">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update_sweeps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update sweeps.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            Updated sweeps.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nominal_variation</span><span class="o">.</span><span class="n">GetSweepNames</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">GetDesignVariableNames</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="nb">reversed</span><span class="p">(</span><span class="n">names</span><span class="p">)))</span></div>

    <span class="nd">@staticmethod</span>
    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_quantity</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        unit :</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">AEDT_UNITS</span><span class="p">:</span>
            <span class="n">keys_units</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">AEDT_UNITS</span><span class="p">[</span><span class="n">el</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
            <span class="k">if</span> <span class="n">unit</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">keys_units</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">el</span>
        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="SolutionData.init_solutions_data"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.init_solutions_data.html#pyaedt.modules.solutions.SolutionData.init_solutions_data">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">init_solutions_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&quot;Initialize the database and store info in variables.&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_solution_data_real</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_solution_data_imag</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_mag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_solution_data_mag</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_solution_data_phase</span><span class="p">()</span></div>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_init_solution_data_mag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">_solutions_mag</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">units_data</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="n">_solutions_mag</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nominal_variation</span><span class="o">.</span><span class="n">GetDataUnits</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
                <span class="n">_solutions_mag</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span>
                    <span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">])</span>
                    <span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span><span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expr</span><span class="p">]))</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">]:</span>
                    <span class="n">_solutions_mag</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">_solutions_mag</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_solutions_mag</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_init_solution_data_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
        <span class="n">sols_data</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">expression</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="n">solution_Data</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">comb</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">):</span>
                <span class="n">solution</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">GetRealDataValues</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">GetSweepValues</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">False</span><span class="p">))))</span>

                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">comb</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">comb</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">):</span>
                    <span class="n">solution_Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">))]</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">sols_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span> <span class="o">=</span> <span class="n">solution_Data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sols_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sols_data</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_init_solution_data_imag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;&quot;&quot;</span>
        <span class="n">sols_data</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">expression</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="n">solution_Data</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">data</span><span class="p">,</span> <span class="n">comb</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_original_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">IsDataComplex</span><span class="p">(</span><span class="n">expression</span><span class="p">):</span>
                    <span class="n">solution</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">GetImagDataValues</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">GetRealDataValues</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="kc">False</span><span class="p">)))</span>
                    <span class="n">solution</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">l</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">GetSweepValues</span><span class="p">(</span><span class="n">el</span><span class="p">,</span> <span class="kc">False</span><span class="p">))))</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">comb</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">comb</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
                <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">):</span>
                    <span class="n">solution_Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">c</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">))]</span> <span class="o">=</span> <span class="n">solution</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">sols_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span> <span class="o">=</span> <span class="n">solution_Data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sols_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sols_data</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_init_solution_data_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data_phase</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="n">data_phase</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
                <span class="n">data_phase</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expr</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">]:</span>
                    <span class="n">data_phase</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expr</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data_phase</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data_phase</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_matrix_real_imag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the full available solution data in Real and Imaginary parts.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        tuple of dicts</span>
<span class="sd">            (Real Dict, Imag Dict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_matrix_mag_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the full available solution data magnitude and phase in radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        tuple of dicts</span>
<span class="sd">            (Mag Dict, Phase Dict).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_mag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_phase</span>

<div class="viewcode-block" id="SolutionData.to_degrees"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.to_degrees.html#pyaedt.modules.solutions.SolutionData.to_degrees">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">to_degrees</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert an input list from radians to degrees.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        input_list : list</span>
<span class="sd">            List of inputs in radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of inputs in degrees.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_list</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">360</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">input_list</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">input_list</span> <span class="o">*</span> <span class="mi">360</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionData.to_radians"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.to_radians.html#pyaedt.modules.solutions.SolutionData.to_radians">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">to_radians</span><span class="p">(</span><span class="n">input_list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert an input list from degrees to radians.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        input_list : list</span>
<span class="sd">            List of inputs in degrees.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        type</span>
<span class="sd">            List of inputs in radians.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_list</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">360</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">input_list</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">input_list</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">360</span></div>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_variation_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_variation</span><span class="p">[</span><span class="n">it</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">active_intrinsic</span><span class="p">[</span><span class="n">it</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">temp</span>

<div class="viewcode-block" id="SolutionData.data_magnitude"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.data_magnitude.html#pyaedt.modules.solutions.SolutionData.data_magnitude">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">data_magnitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the data magnitude of an expression.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, optional</span>
<span class="sd">            Name of the expression. The default is ``None``, in which case the</span>
<span class="sd">            active expression is used.</span>
<span class="sd">        convert_to_SI : bool, optional</span>
<span class="sd">            Whether to convert the data to the SI unit system.</span>
<span class="sd">            The default is ``False``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of data.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="k">elif</span> <span class="n">expression</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variation_tuple</span><span class="p">()</span>
        <span class="n">solution_Data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_mag</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span>
        <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">sw</span><span class="p">:</span>
            <span class="n">temp</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">el</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution_Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">temp</span><span class="p">)])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">convert_to_SI</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quantity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]):</span>
            <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_list_to_SI</span><span class="p">(</span>
                <span class="n">sol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quantity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sol</span></div>

    <span class="nd">@staticmethod</span>
    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_convert_list_to_SI</span><span class="p">(</span><span class="n">datalist</span><span class="p">,</span> <span class="n">dataunits</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a data list to the SI unit system.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        datalist : list</span>
<span class="sd">           List of data to convert.</span>
<span class="sd">        dataunits :</span>

<span class="sd">        units :</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">           List of the data converted to the SI unit system.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="n">datalist</span>
        <span class="k">if</span> <span class="n">dataunits</span> <span class="ow">in</span> <span class="n">AEDT_UNITS</span> <span class="ow">and</span> <span class="n">units</span> <span class="ow">in</span> <span class="n">AEDT_UNITS</span><span class="p">[</span><span class="n">dataunits</span><span class="p">]:</span>
            <span class="n">sol</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="n">AEDT_UNITS</span><span class="p">[</span><span class="n">dataunits</span><span class="p">][</span><span class="n">units</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">datalist</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">sol</span>

<div class="viewcode-block" id="SolutionData.data_db10"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.data_db10.html#pyaedt.modules.solutions.SolutionData.data_db10">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">data_db10</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the data in the database for an expression and convert in db10.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, optional</span>
<span class="sd">            Name of the expression. The default is ``None``,</span>
<span class="sd">            in which case the active expression is used.</span>
<span class="sd">        convert_to_SI : bool, optional</span>
<span class="sd">            Whether to convert the data to the SI unit system.</span>
<span class="sd">            The default is ``False``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of the data in the database for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_magnitude</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">db10</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_magnitude</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="p">)]</span></div>

<div class="viewcode-block" id="SolutionData.data_db20"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.data_db20.html#pyaedt.modules.solutions.SolutionData.data_db20">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">data_db20</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the data in the database for an expression and convert in db20.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, optional</span>
<span class="sd">            Name of the expression. The default is ``None``,</span>
<span class="sd">            in which case the active expression is used.</span>
<span class="sd">        convert_to_SI : bool, optional</span>
<span class="sd">            Whether to convert the data to the SI unit system.</span>
<span class="sd">            The default is ``False``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of the data in the database for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_magnitude</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">db20</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_magnitude</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="p">)]</span></div>

<div class="viewcode-block" id="SolutionData.data_phase"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.data_phase.html#pyaedt.modules.solutions.SolutionData.data_phase">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">data_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">radians</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the phase part of the data for an expression.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, None</span>
<span class="sd">            Name of the expression. The default is ``None``,</span>
<span class="sd">            in which case the active expression is used.</span>
<span class="sd">        radians : bool, optional</span>
<span class="sd">            Whether to convert the data into radians or degree.</span>
<span class="sd">            The default is ``True`` for radians.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            Phase data for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="n">coefficient</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">radians</span><span class="p">:</span>
            <span class="n">coefficient</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">coefficient</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_imag</span><span class="p">(</span><span class="n">expression</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_real</span><span class="p">(</span><span class="n">expression</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">coefficient</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_real</span><span class="p">(</span><span class="n">expression</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_imag</span><span class="p">(</span><span class="n">expression</span><span class="p">))]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">primary_sweep_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the primary sweep for a given data and primary variable.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of the primary sweep valid points for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">primary_sweep_variations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the variations lists for a given primary variable.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of the primary sweep valid points for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variation_tuple</span><span class="p">()</span>

        <span class="n">solution_Data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep_values</span><span class="p">:</span>
            <span class="n">temp</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">el</span>
            <span class="k">if</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="ow">in</span> <span class="n">solution_Data</span><span class="p">:</span>
                <span class="n">sol_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">({})</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">sn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">:</span>
                    <span class="n">sol_dict</span><span class="p">[</span><span class="n">sn</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sol_dict</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sol</span>

<div class="viewcode-block" id="SolutionData.data_real"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.data_real.html#pyaedt.modules.solutions.SolutionData.data_real">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">data_real</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the real part of the data for an expression.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, None</span>
<span class="sd">            Name of the expression. The default is ``None``,</span>
<span class="sd">            in which case the active expression is used.</span>
<span class="sd">        convert_to_SI : bool, optional</span>
<span class="sd">            Whether to convert the data to the SI unit system.</span>
<span class="sd">            The default is ``False``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of the real data for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variation_tuple</span><span class="p">()</span>

        <span class="n">solution_Data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep_values</span><span class="p">:</span>
            <span class="n">temp</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">el</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution_Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">temp</span><span class="p">)])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">convert_to_SI</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quantity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]):</span>
            <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_list_to_SI</span><span class="p">(</span>
                <span class="n">sol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quantity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sol</span></div>

<div class="viewcode-block" id="SolutionData.data_imag"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.data_imag.html#pyaedt.modules.solutions.SolutionData.data_imag">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">data_imag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">convert_to_SI</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve the imaginary part of the data for an expression.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, optional</span>
<span class="sd">            Name of the expression. The default is ``None``,</span>
<span class="sd">            in which case the active expression is used.</span>
<span class="sd">        convert_to_SI : bool, optional</span>
<span class="sd">            Whether to convert the data to the SI unit system.</span>
<span class="sd">            The default is ``False``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of the imaginary data for the expression.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variation_tuple</span><span class="p">()</span>

        <span class="n">solution_Data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep_values</span><span class="p">:</span>
            <span class="n">temp</span><span class="p">[</span><span class="n">position</span><span class="p">]</span> <span class="o">=</span> <span class="n">el</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution_Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">temp</span><span class="p">)])</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">convert_to_SI</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quantity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]):</span>
            <span class="n">sol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_convert_list_to_SI</span><span class="p">(</span>
                <span class="n">sol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quantity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">units_data</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sol</span></div>

<div class="viewcode-block" id="SolutionData.is_real_only"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.is_real_only.html#pyaedt.modules.solutions.SolutionData.is_real_only">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">is_real_only</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the expression has only real values or not.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expression : str, optional</span>
<span class="sd">            Name of the expression. The default is ``None``,</span>
<span class="sd">            in which case the active expression is used.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` if the Solution Data for specific expression contains only real values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expression</span><span class="p">:</span>
            <span class="n">expression</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.0</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">expression</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="SolutionData.export_data_to_csv"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.export_data_to_csv.html#pyaedt.modules.solutions.SolutionData.export_data_to_csv">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">export_data_to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save to output csv file the Solution Data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        output : str,</span>
<span class="sd">            Full path to csv file.</span>
<span class="sd">        delimiter : str,</span>
<span class="sd">            CSV Delimiter. Default is ``&quot;;&quot;``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="n">el</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sweeps_names</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_real_only</span><span class="p">(</span><span class="n">el</span><span class="p">):</span>
                <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span> <span class="o">+</span> <span class="s2">&quot; (Real)&quot;</span><span class="p">)</span>
                <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span> <span class="o">+</span> <span class="s2">&quot; (Imag)&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>

        <span class="n">list_full</span> <span class="o">=</span> <span class="p">[</span><span class="n">header</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">list_full</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">expressions</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">el</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">list_full</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_real_only</span><span class="p">(</span><span class="n">el</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">el</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">list_full</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">write_csv</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">list_full</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionData.plot"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.plot.html#pyaedt.modules.solutions.SolutionData.plot">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">curves</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">math_formula</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="n">show_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">snapshot_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">is_polar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a matplotlib plot based on a list of data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        curves : list</span>
<span class="sd">            Curves to be plotted. If None, the first curve will be plotted.</span>
<span class="sd">        math_formula : str , optional</span>
<span class="sd">            Mathematical formula to apply to the plot curve.</span>
<span class="sd">            Valid values are `&quot;re&quot;`, `&quot;im&quot;`, `&quot;db20&quot;`, `&quot;db10&quot;`, `&quot;abs&quot;`, `&quot;mag&quot;`, `&quot;phasedeg&quot;`, `&quot;phaserad&quot;`.</span>
<span class="sd">            `None` value will plot only real value of the data stored in solution data.</span>
<span class="sd">        size : tuple, optional</span>
<span class="sd">            Image size in pixel (width, height).</span>
<span class="sd">        show_legend : bool</span>
<span class="sd">            Either to show legend or not. Flag will be ignored if number of curves to plot is greater than 15.</span>
<span class="sd">        xlabel : str</span>
<span class="sd">            Plot X label.</span>
<span class="sd">        ylabel : str</span>
<span class="sd">            Plot Y label.</span>
<span class="sd">        title : str</span>
<span class="sd">            Plot Title label.</span>
<span class="sd">        snapshot_path : str</span>
<span class="sd">            Full path to image file if a snapshot is needed.</span>
<span class="sd">        is_polar : bool, optional</span>
<span class="sd">            Set to `True` if this is a polar plot.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`matplotlib.plt`</span>
<span class="sd">            Matplotlib fig object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_ironpython</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">curves</span><span class="p">:</span>
            <span class="n">curves</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">curves</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">curves</span> <span class="o">=</span> <span class="p">[</span><span class="n">curves</span><span class="p">]</span>
        <span class="n">data_plot</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">sweep_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span>
        <span class="k">if</span> <span class="n">is_polar</span><span class="p">:</span>
            <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep_values</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep_values</span>
        <span class="k">for</span> <span class="n">curve</span> <span class="ow">in</span> <span class="n">curves</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">math_formula</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_real</span><span class="p">(</span><span class="n">curve</span><span class="p">),</span> <span class="n">curve</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;re&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_real</span><span class="p">(</span><span class="n">curve</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;im&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_imag</span><span class="p">(</span><span class="n">curve</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;db20&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_db20</span><span class="p">(</span><span class="n">curve</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;db10&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_db10</span><span class="p">(</span><span class="n">curve</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;mag&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_magnitude</span><span class="p">(</span><span class="n">curve</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;phasedeg&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_phase</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;phaserad&quot;</span><span class="p">:</span>
                <span class="n">data_plot</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sw</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_phase</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math_formula</span><span class="p">,</span> <span class="n">curve</span><span class="p">)])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">xlabel</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="n">sweep_name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ylabel</span><span class="p">:</span>
            <span class="n">ylabel</span> <span class="o">=</span> <span class="n">math_formula</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Simulation Results Plot&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_plot</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
            <span class="n">show_legend</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">is_polar</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">plot_polar_chart</span><span class="p">(</span><span class="n">data_plot</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">show_legend</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">snapshot_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">plot_2d_chart</span><span class="p">(</span><span class="n">data_plot</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">show_legend</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">snapshot_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionData.plot_3d"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.plot_3d.html#pyaedt.modules.solutions.SolutionData.plot_3d">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">plot_3d</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">curve</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">x_axis</span><span class="o">=</span><span class="s2">&quot;Theta&quot;</span><span class="p">,</span>
        <span class="n">y_axis</span><span class="o">=</span><span class="s2">&quot;Phi&quot;</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">math_formula</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="n">snapshot_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a matplotlib 3d plot based on a list of data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        curve : str</span>
<span class="sd">            Curve to be plotted. If None, the first curve will be plotted.</span>
<span class="sd">        x_axis : str, optional</span>
<span class="sd">            X Axis sweep. Default is `&quot;Theta&quot;`.</span>
<span class="sd">        y_axis : str, optional</span>
<span class="sd">            Y Axis sweep. Default is `&quot;Phi&quot;`.</span>
<span class="sd">        math_formula : str , optional</span>
<span class="sd">            Mathematical formula to apply to the plot curve.</span>
<span class="sd">            Valid values are `&quot;re&quot;`, `&quot;im&quot;`, `&quot;db20&quot;`, `&quot;db10&quot;`, `&quot;abs&quot;`, `&quot;mag&quot;`, `&quot;phasedeg&quot;`, `&quot;phaserad&quot;`.</span>
<span class="sd">        size : tuple, optional</span>
<span class="sd">            Image size in pixel (width, height).</span>
<span class="sd">        snapshot_path : str</span>
<span class="sd">            Full path to image file if a snapshot is needed.</span>
<span class="sd">        is_polar : bool, optional</span>
<span class="sd">            Set to `True` if this is a polar plot.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`matplotlib.plt`</span>
<span class="sd">            Matplotlib fig object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_ironpython</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">curve</span><span class="p">:</span>
            <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_expression</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">math_formula</span><span class="p">:</span>
            <span class="n">math_formula</span> <span class="o">=</span> <span class="s2">&quot;mag&quot;</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="n">x_axis</span><span class="p">)</span>
        <span class="n">y_axis_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="n">y_axis</span><span class="p">)</span>

        <span class="n">phi</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">y_axis_val</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">active_variation</span><span class="p">[</span><span class="n">y_axis</span><span class="p">]</span> <span class="o">=</span> <span class="n">el</span>
            <span class="n">phi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;re&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_real</span><span class="p">(</span><span class="n">curve</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;im&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_imag</span><span class="p">(</span><span class="n">curve</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;db20&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_db20</span><span class="p">(</span><span class="n">curve</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;db10&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_db10</span><span class="p">(</span><span class="n">curve</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;mag&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_magnitude</span><span class="p">(</span><span class="n">curve</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;phasedeg&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_phase</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">math_formula</span> <span class="o">==</span> <span class="s2">&quot;phaserad&quot;</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_phase</span><span class="p">(</span><span class="n">curve</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
        <span class="n">active_sweep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">active_intrinsic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">active_sweep</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primary_sweep</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">new_r</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">r</span><span class="p">:</span>
                <span class="n">new_r</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">el</span><span class="p">[</span><span class="n">position</span><span class="p">]])</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">new_r</span>
        <span class="n">data_plot</span> <span class="o">=</span> <span class="p">[</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">r</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">xlabel</span><span class="p">:</span>
            <span class="n">xlabel</span> <span class="o">=</span> <span class="n">x_axis</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ylabel</span><span class="p">:</span>
            <span class="n">ylabel</span> <span class="o">=</span> <span class="n">y_axis</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Simulation Results Plot&quot;</span>
        <span class="k">return</span> <span class="n">plot_3d_chart</span><span class="p">(</span><span class="n">data_plot</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">snapshot_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionData.ifft"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.ifft.html#pyaedt.modules.solutions.SolutionData.ifft">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">ifft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curve_header</span><span class="o">=</span><span class="s2">&quot;NearE&quot;</span><span class="p">,</span> <span class="n">u_axis</span><span class="o">=</span><span class="s2">&quot;_u&quot;</span><span class="p">,</span> <span class="n">v_axis</span><span class="o">=</span><span class="s2">&quot;_v&quot;</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create IFFT of given complex data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        curve_header : curve header. Solution data must contain 3 curves with X, Y and Z components of curve header.</span>
<span class="sd">        u_axis : str, optional</span>
<span class="sd">            U Axis name. Default is Hfss name &quot;_u&quot;</span>
<span class="sd">        v_axis : str, optional</span>
<span class="sd">            V Axis name. Default is Hfss name &quot;_v&quot;</span>
<span class="sd">        window : bool, optional</span>
<span class="sd">            Either if Hanning windowing has to be applied.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List</span>
<span class="sd">            IFFT Matrix.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_ironpython</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="n">u_axis</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="n">v_axis</span><span class="p">)</span>

        <span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="s2">&quot;Freq&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pandas_output</span><span class="p">:</span>
            <span class="n">E_realx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;X&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_imagx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;X&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_realy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_imagy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_realz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_imagz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vals_real_Ex</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;X&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">vals_imag_Ex</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;X&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">vals_real_Ey</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">vals_imag_Ey</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Y&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">vals_real_Ez</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_real</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">vals_imag_Ez</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_solutions_imag</span><span class="p">[</span><span class="n">curve_header</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

            <span class="n">E_realx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals_real_Ex</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_imagx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals_imag_Ex</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_realy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals_real_Ey</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_imagy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals_imag_Ey</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_realz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals_real_Ez</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
            <span class="n">E_imagz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals_imag_Ez</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>

        <span class="n">Temp_E_compx</span> <span class="o">=</span> <span class="n">E_realx</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">E_imagx</span>  <span class="c1"># Here is the complex FD data matrix, ready for transforming</span>
        <span class="n">Temp_E_compy</span> <span class="o">=</span> <span class="n">E_realy</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">E_imagy</span>
        <span class="n">Temp_E_compz</span> <span class="o">=</span> <span class="n">E_realz</span> <span class="o">+</span> <span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">E_imagz</span>

        <span class="n">E_compx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;complex_&quot;</span><span class="p">)</span>
        <span class="n">E_compy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;complex_&quot;</span><span class="p">)</span>
        <span class="n">E_compz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;complex_&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">window</span><span class="p">:</span>
            <span class="n">timewin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hanning</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)):</span>
                <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)):</span>
                    <span class="n">E_compx</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">Temp_E_compx</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">],</span> <span class="n">timewin</span><span class="p">)</span>
                    <span class="n">E_compy</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">Temp_E_compy</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">],</span> <span class="n">timewin</span><span class="p">)</span>
                    <span class="n">E_compz</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">Temp_E_compz</span><span class="p">[:,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">],</span> <span class="n">timewin</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">E_compx</span> <span class="o">=</span> <span class="n">Temp_E_compx</span>
            <span class="n">E_compy</span> <span class="o">=</span> <span class="n">Temp_E_compy</span>
            <span class="n">E_compz</span> <span class="o">=</span> <span class="n">Temp_E_compz</span>

        <span class="n">E_time_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">ifft</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">E_compx</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">E_time_y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">ifft</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">E_compy</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">E_time_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">ifft</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">E_compz</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">E_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">freq</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">size</span><span class="p">(</span><span class="n">u</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">freq</span><span class="p">)):</span>
            <span class="n">E_time</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">E_time_x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">E_time_y</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">E_time_z</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]))</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ifft</span> <span class="o">=</span> <span class="n">E_time</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ifft</span></div>

<div class="viewcode-block" id="SolutionData.ifft_to_file"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.SolutionData.ifft_to_file.html#pyaedt.modules.solutions.SolutionData.ifft_to_file">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">ifft_to_file</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">u_axis</span><span class="o">=</span><span class="s2">&quot;_u&quot;</span><span class="p">,</span>
        <span class="n">v_axis</span><span class="o">=</span><span class="s2">&quot;_v&quot;</span><span class="p">,</span>
        <span class="n">coord_system_center</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">db_val</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">num_frames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">csv_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">name_str</span><span class="o">=</span><span class="s2">&quot;res_&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save IFFT Matrix to a list of csv files (one per time step).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        u_axis : str, optional</span>
<span class="sd">            U Axis name. Default is Hfss name &quot;_u&quot;</span>
<span class="sd">        v_axis : str, optional</span>
<span class="sd">            V Axis name. Default is Hfss name &quot;_v&quot;</span>
<span class="sd">        coord_system_center : list, optional</span>
<span class="sd">            List of UV GlobalCS Center.</span>
<span class="sd">        db_val : bool, optional</span>
<span class="sd">            Either if data has to be exported in db or not.</span>
<span class="sd">        num_frames : int, optional</span>
<span class="sd">            Number of frames to export.</span>
<span class="sd">        csv_dir : str</span>
<span class="sd">            Output path</span>
<span class="sd">        name_str : str, optional</span>
<span class="sd">            csv file header.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path to file containing the list of csv files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">coord_system_center</span><span class="p">:</span>
            <span class="n">coord_system_center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">t_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ifft</span>
        <span class="n">x_c_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="n">u_axis</span><span class="p">)</span>
        <span class="n">y_c_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variation_values</span><span class="p">(</span><span class="n">v_axis</span><span class="p">)</span>

        <span class="n">adj_x</span> <span class="o">=</span> <span class="n">coord_system_center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">adj_y</span> <span class="o">=</span> <span class="n">coord_system_center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">adj_z</span> <span class="o">=</span> <span class="n">coord_system_center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">num_frames</span><span class="p">:</span>
            <span class="n">frames</span> <span class="o">=</span> <span class="n">num_frames</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">frames</span> <span class="o">=</span> <span class="n">t_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">csv_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">csv_dir</span><span class="p">):</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">csv_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">csv_dir</span><span class="p">)</span> <span class="k">if</span> <span class="n">name_str</span> <span class="ow">in</span> <span class="n">f</span> <span class="ow">and</span> <span class="s2">&quot;.csv&quot;</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">csv_dir</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">frames</span><span class="p">):</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">csv_dir</span><span class="p">,</span> <span class="n">name_str</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.csv&quot;</span><span class="p">)</span>
            <span class="n">list_full</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;val&quot;</span><span class="p">]]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">y_c_list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">x_c_list</span><span class="p">):</span>
                    <span class="n">y_coord</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">adj_y</span>
                    <span class="n">x_coord</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">adj_x</span>
                    <span class="n">z_coord</span> <span class="o">=</span> <span class="n">adj_z</span>
                    <span class="k">if</span> <span class="n">db_val</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">t_matrix</span><span class="p">[</span><span class="n">frame</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">t_matrix</span><span class="p">[</span><span class="n">frame</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
                    <span class="n">row_lst</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">,</span> <span class="n">z_coord</span><span class="p">,</span> <span class="n">val</span><span class="p">]</span>
                    <span class="n">list_full</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_lst</span><span class="p">)</span>
            <span class="n">write_csv</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">list_full</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="n">csv_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>

        <span class="n">txt_file_name</span> <span class="o">=</span> <span class="n">csv_dir</span> <span class="o">+</span> <span class="s2">&quot;fft_list.txt&quot;</span>
        <span class="n">textfile</span> <span class="o">=</span> <span class="n">open_file</span><span class="p">(</span><span class="n">txt_file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">csv_list</span><span class="p">:</span>
            <span class="n">textfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">element</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">textfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">txt_file_name</span></div></div>


<div class="viewcode-block" id="FfdSolutionData"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.html#pyaedt.modules.solutions.FfdSolutionData">[docs]</a><span class="k">class</span> <span class="nc">FfdSolutionData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Contains Hfss Far Field Solution Data (ffd).&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">app</span><span class="p">,</span>
        <span class="n">sphere_name</span><span class="p">,</span>
        <span class="n">setup_name</span><span class="p">,</span>
        <span class="n">frequencies</span><span class="p">,</span>
        <span class="n">variations</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">taper</span><span class="o">=</span><span class="s2">&quot;flat&quot;</span><span class="p">,</span>
        <span class="n">sbr_3d_comp_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span> <span class="o">=</span> <span class="n">app</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="o">=</span> <span class="mi">64</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_port_indexes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_max</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sphere_name</span> <span class="o">=</span> <span class="n">sphere_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_name</span> <span class="o">=</span> <span class="n">setup_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sbr_comp</span> <span class="o">=</span> <span class="n">sbr_3d_comp_name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frequencies</span> <span class="o">=</span> <span class="p">[</span><span class="n">frequencies</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">frequencies</span> <span class="o">=</span> <span class="n">frequencies</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequencies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variations</span> <span class="o">=</span> <span class="n">variations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span> <span class="o">=</span> <span class="n">overwrite</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_all_solutions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_export_all_ffd</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_solutions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lattice_vectors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_lattice_vectors</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">taper</span> <span class="o">=</span> <span class="n">taper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_ffd</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phase_offset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">)</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_init_ffd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">all_ports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">valid_ffd</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span><span class="p">[</span><span class="n">all_ports</span><span class="p">[</span><span class="mi">0</span><span class="p">]]):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span><span class="p">[</span><span class="n">all_ports</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">reader</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
                <span class="n">phi</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">reader</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">port</span><span class="p">:</span>
                    <span class="n">port</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">temp_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">theta_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span>
                <span class="n">phi_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">*</span><span class="n">phi</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span><span class="p">[</span><span class="n">port</span><span class="p">]):</span>
                    <span class="n">eep_txt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span><span class="p">[</span><span class="n">port</span><span class="p">],</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
                    <span class="n">Etheta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="nb">complex</span><span class="p">)(</span><span class="n">eep_txt</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">eep_txt</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
                    <span class="n">Ephi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vectorize</span><span class="p">(</span><span class="nb">complex</span><span class="p">)(</span><span class="n">eep_txt</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">eep_txt</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">])</span>
                    <span class="c1"># eep=np.column_stack((etheta, ephi))</span>
                    <span class="n">temp_dict</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">theta_range</span>
                    <span class="n">temp_dict</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phi_range</span>
                    <span class="n">temp_dict</span><span class="p">[</span><span class="s2">&quot;rETheta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Etheta</span>
                    <span class="n">temp_dict</span><span class="p">[</span><span class="s2">&quot;rEPhi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ephi</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_dict</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">valid_ffd</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">valid_ffd</span><span class="p">:</span>
                <span class="c1"># differential area of sphere, based on observation angle</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">d_theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">theta_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">theta_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">d_phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">phi_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">phi_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">diff_area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d_theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d_phi</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">theta_range</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_samples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_dict</span><span class="p">[</span><span class="s2">&quot;rETheta&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_port_indexes</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_port_indexes</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_array_index</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">solution_type</span> <span class="o">=</span> <span class="s2">&quot;DrivenModal&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unique_beams</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">renormalize</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">renormalize_dB</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">renorm_value</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">valid_ffd</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;ERROR: Far Field Files are Missing&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valid_ffd</span> <span class="o">=</span> <span class="n">valid_ffd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lattice_vectors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lattice_vectors</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bx</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lattice_vectors</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">By</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lattice_vectors</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phase_offset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mag_offset</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get/set the Active Frequency.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span>

    <span class="nd">@frequency</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequencies</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span> <span class="o">=</span> <span class="n">val</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ffd_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_solutions</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frequencies</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">val</span><span class="p">)]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_init_ffd</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">phase_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Additional phase offset in degrees on each port. Useful when element has more than one port.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase_offset</span>

    <span class="nd">@phase_offset</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">phase_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phases</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">phases</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Number of phases must be equal to number of ports&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">phases_to_rad</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">phases</span><span class="p">:</span>
                <span class="n">phases_to_rad</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">phase</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_phase_offset</span> <span class="o">=</span> <span class="n">phases_to_rad</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mag_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Additional magnitude on each port. Useful when element has more than one port.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mag_offset</span>

    <span class="nd">@mag_offset</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">mag_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mags</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mags</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Number of magnitude must be equal to number of ports&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mag_offset</span> <span class="o">=</span> <span class="n">mags</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">()</span>

<div class="viewcode-block" id="FfdSolutionData.get_array_index"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.get_array_index.html#pyaedt.modules.solutions.FfdSolutionData.get_array_index">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_array_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get index of a given port.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        port_name : str</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port_indexes</span> <span class="ow">and</span> <span class="n">port_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port_indexes</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_port_indexes</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">str1</span> <span class="o">=</span> <span class="n">port_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">index_str</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">str1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">index_str</span></div>

<div class="viewcode-block" id="FfdSolutionData.array_min_max_values"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.array_min_max_values.html#pyaedt.modules.solutions.FfdSolutionData.array_min_max_values">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">array_min_max_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Array bounding box.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">row_min</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">row_max</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">col_min</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">col_max</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">portstring</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">:</span>
            <span class="n">index_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_array_index</span><span class="p">(</span><span class="n">portstring</span><span class="p">)</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index_str</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">cols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index_str</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">row_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="n">row_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
        <span class="n">col_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
        <span class="n">col_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">col_min</span><span class="p">,</span> <span class="n">col_max</span><span class="p">,</span> <span class="n">row_min</span><span class="p">,</span> <span class="n">row_max</span><span class="p">]</span></div>

<div class="viewcode-block" id="FfdSolutionData.array_center_and_edge"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.array_center_and_edge.html#pyaedt.modules.solutions.FfdSolutionData.array_center_and_edge">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">array_center_and_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the center and edge of our array, assumes all ports in far field</span>
<span class="sd">        mapping file are active ports.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">AMax</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">BMax</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">RMax</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">XMax</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">YMax</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">CenterA</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">CenterB</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">CenterX</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">CenterY</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># collecting all active cells inside the specified region</span>
        <span class="n">activeCells</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">)):</span>
            <span class="n">index_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_array_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">index_str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">index_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">row</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">col</span>

            <span class="n">activeCells</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>  <span class="c1"># because ffd is assuming all ffd files are active</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">activeCells</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="p">[</span><span class="n">a_min</span><span class="p">,</span> <span class="n">a_max</span><span class="p">,</span> <span class="n">b_min</span><span class="p">,</span> <span class="n">b_max</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_min_max_values</span><span class="p">()</span>

        <span class="n">CenterA</span> <span class="o">=</span> <span class="p">(</span><span class="n">a_min</span> <span class="o">+</span> <span class="n">a_max</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">CenterB</span> <span class="o">=</span> <span class="p">(</span><span class="n">b_min</span> <span class="o">+</span> <span class="n">b_max</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">CenterX</span> <span class="o">=</span> <span class="p">(</span><span class="n">CenterA</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">+</span> <span class="p">(</span><span class="n">CenterB</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Bx</span>
        <span class="n">CenterY</span> <span class="o">=</span> <span class="p">(</span><span class="n">CenterA</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">+</span> <span class="p">(</span><span class="n">CenterB</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">By</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">CenterA</span> <span class="o">=</span> <span class="n">CenterA</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CenterB</span> <span class="o">=</span> <span class="n">CenterB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CenterX</span> <span class="o">=</span> <span class="n">CenterX</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CenterY</span> <span class="o">=</span> <span class="n">CenterY</span>
        <span class="c1"># find the distance from the edge to the center</span>
        <span class="n">AMax</span> <span class="o">=</span> <span class="n">a_max</span> <span class="o">-</span> <span class="n">a_min</span>
        <span class="n">BMax</span> <span class="o">=</span> <span class="n">b_max</span> <span class="o">-</span> <span class="n">b_min</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">AMax</span> <span class="o">=</span> <span class="n">AMax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">BMax</span> <span class="o">=</span> <span class="n">BMax</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">activeCells</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Bx</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">By</span>
            <span class="n">x_dis</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">CenterX</span><span class="p">)</span>
            <span class="n">y_dis</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">CenterY</span><span class="p">)</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x_dis</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_dis</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">XMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">XMax</span><span class="p">,</span> <span class="n">x_dis</span><span class="p">)</span>
            <span class="n">YMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">YMax</span><span class="p">,</span> <span class="n">y_dis</span><span class="p">)</span>
            <span class="n">RMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">RMax</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">RMax</span> <span class="o">=</span> <span class="n">RMax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">XMax</span> <span class="o">=</span> <span class="n">XMax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">YMax</span> <span class="o">=</span> <span class="n">YMax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RMax</span> <span class="o">*=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">XMax</span> <span class="o">*=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">YMax</span> <span class="o">*=</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FfdSolutionData.element_location"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.element_location.html#pyaedt.modules.solutions.FfdSolutionData.element_location">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">element_location</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Element location in the array.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        a : int</span>
<span class="sd">        b : int</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Bx</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">By</span>
        <span class="n">x_dis</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">CenterX</span>
        <span class="n">y_dis</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">CenterY</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x_dis</span><span class="p">,</span> <span class="n">y_dis</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span></div>

<div class="viewcode-block" id="FfdSolutionData.assign_weight"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.assign_weight.html#pyaedt.modules.solutions.FfdSolutionData.assign_weight">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">assign_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">taper</span><span class="o">=</span><span class="s2">&quot;flat&quot;</span><span class="p">,</span> <span class="n">port_cont</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign weight to array.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        a : int</span>
<span class="sd">            Inndex of array, column.</span>
<span class="sd">        b : int</span>
<span class="sd">            Inndex of array, row.</span>
<span class="sd">        taper : string, optional</span>
<span class="sd">            This is the type of taper we want to apply. The default is &#39;flat&#39;.</span>
<span class="sd">            It can be ``&quot;cosine&quot;``, ``&quot;triangular&quot;``, ``&quot;hamming&quot;`` or ``&quot;flat&quot;``.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            Weight to applied to specific index of array.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">taper</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;flat&quot;</span><span class="p">:</span>  <span class="c1"># Flat</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mag_offset</span><span class="p">[</span><span class="n">port_cont</span><span class="p">]</span>

        <span class="n">cosinePow</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">edgeTaper_dB</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span>

        <span class="n">edgeTaper</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">edgeTaper_dB</span><span class="p">))</span> <span class="o">/</span> <span class="mi">20</span><span class="p">)</span>

        <span class="n">threshold</span> <span class="o">=</span> <span class="mf">1e-10</span>
        <span class="n">length_in_direction1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">max_length_in_dir1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">length_in_direction2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">max_length_in_dir2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">w1</span> <span class="o">=</span> <span class="n">w2</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># find the distance between current cell and array center in terms of index</span>
        <span class="n">length_in_direction1</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">CenterA</span>
        <span class="n">length_in_direction2</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">CenterB</span>
        <span class="n">max_length_in_dir1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AMax</span>
        <span class="n">max_length_in_dir2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">BMax</span>

        <span class="k">if</span> <span class="n">taper</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;cosine&quot;</span><span class="p">:</span>  <span class="c1"># Cosine</span>
            <span class="k">if</span> <span class="n">max_length_in_dir1</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">w1</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">edgeTaper</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">length_in_direction1</span> <span class="o">/</span> <span class="n">max_length_in_dir1</span><span class="p">)</span>
                <span class="p">)</span> <span class="o">**</span> <span class="n">cosinePow</span> <span class="o">+</span> <span class="n">edgeTaper</span>
            <span class="k">if</span> <span class="n">max_length_in_dir2</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">w2</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">edgeTaper</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">length_in_direction2</span> <span class="o">/</span> <span class="n">max_length_in_dir2</span><span class="p">)</span>
                <span class="p">)</span> <span class="o">**</span> <span class="n">cosinePow</span> <span class="o">+</span> <span class="n">edgeTaper</span>
        <span class="k">elif</span> <span class="n">taper</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;triangular&quot;</span><span class="p">:</span>  <span class="c1"># Triangular</span>
            <span class="k">if</span> <span class="n">max_length_in_dir1</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">w1</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">edgeTaper</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">length_in_direction1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_length_in_dir1</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)))</span> <span class="o">+</span> <span class="n">edgeTaper</span>
            <span class="k">if</span> <span class="n">max_length_in_dir2</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">w2</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">edgeTaper</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">length_in_direction2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_length_in_dir2</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)))</span> <span class="o">+</span> <span class="n">edgeTaper</span>
        <span class="k">elif</span> <span class="n">taper</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;hamming&quot;</span><span class="p">:</span>  <span class="c1"># Hamming Window</span>
            <span class="k">if</span> <span class="n">max_length_in_dir1</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">w1</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w1</span> <span class="o">=</span> <span class="mf">0.54</span> <span class="o">-</span> <span class="mf">0.46</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">length_in_direction1</span> <span class="o">/</span> <span class="n">max_length_in_dir1</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">max_length_in_dir2</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="n">w2</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w2</span> <span class="o">=</span> <span class="mf">0.54</span> <span class="o">-</span> <span class="mf">0.46</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">length_in_direction2</span> <span class="o">/</span> <span class="n">max_length_in_dir2</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="k">return</span> <span class="n">w1</span> <span class="o">*</span> <span class="n">w2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">mag_offset</span><span class="p">[</span><span class="n">port_cont</span><span class="p">]</span></div>

<div class="viewcode-block" id="FfdSolutionData.beamform"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.beamform.html#pyaedt.modules.solutions.FfdSolutionData.beamform">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">beamform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute the far field pattern calculated for a specific phi/scan angle requested.</span>
<span class="sd">        This is calculated based on the lattice vector spacing and the embedded element</span>
<span class="sd">        patterns of a ca-ddm or fa-ddm array in HFSS.</span>
<span class="sd">        Calculates phase shifts between array elements in A and B directions,</span>
<span class="sd">        PhaseShiftA and PhaseShiftB, given Wave Vector (k), lattice vectors</span>
<span class="sd">        (Ax, Ay, Bx, By), Scan angles (theta, phi) using formula below</span>
<span class="sd">        Phase Shift A = - (Ax*k*sin(theta)*cos(phi) + Ay*k*sin(theta)*sin(phi))</span>
<span class="sd">        Phase Shift B = - (Bx*k*sin(theta)*cos(phi) + By*k*sin(theta)*sin(phi)).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi_scan : int, float</span>
<span class="sd">            Spherical cs for desired scan angle of beam.</span>
<span class="sd">        theta_scan: : int, float</span>
<span class="sd">            Spherical cs for desired scan angle of beam.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            Updated quantities dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_ports</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_center_and_edge</span><span class="p">()</span>

        <span class="n">c</span> <span class="o">=</span> <span class="mi">299792458</span>
        <span class="n">k</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span>

        <span class="n">theta_scan</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">theta_scan</span><span class="p">)</span>
        <span class="n">phi_scan</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">)</span>

        <span class="n">phase_shift_A_rad</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">phase_shift_B_rad</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Bx</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">By</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">w_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">w_dict_ang</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">w_dict_mag</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">array_positions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">port_cont</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">port_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">:</span>
            <span class="n">index_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_array_index</span><span class="p">(</span><span class="n">port_name</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">index_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">index_str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">w_mag</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_weight</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">taper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">taper</span><span class="p">,</span> <span class="n">port_cont</span><span class="o">=</span><span class="n">port_cont</span><span class="p">)),</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">w_ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase_offset</span><span class="p">[</span><span class="n">port_cont</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">phase_shift_A_rad</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">phase_shift_B_rad</span><span class="p">)</span>
            <span class="n">w_dict</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">w_mag</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">w_ang</span><span class="p">)</span>
            <span class="n">w_dict_ang</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">w_ang</span>
            <span class="n">w_dict_mag</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">w_mag</span>
            <span class="n">array_positions</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_location</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
            <span class="n">port_cont</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">length_of_ff_data</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="s2">&quot;rETheta&quot;</span><span class="p">])</span>

        <span class="n">rEtheta_fields</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_ports</span><span class="p">,</span> <span class="n">length_of_ff_data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
        <span class="n">rEphi_fields</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_ports</span><span class="p">,</span> <span class="n">length_of_ff_data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_ports</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
        <span class="c1"># create port mapping</span>
        <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">port</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">):</span>
            <span class="n">re_theta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;rETheta&quot;</span><span class="p">]</span>  <span class="c1"># this is re_theta index of loaded data</span>
            <span class="n">re_phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;rEPhi&quot;</span><span class="p">]</span>  <span class="c1"># this is re_ohi index of loaded data</span>

            <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">w_dict</span><span class="p">[</span><span class="n">port</span><span class="p">]</span>  <span class="c1"># build 1xNumPorts array of weights</span>

            <span class="n">rEtheta_fields</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">re_theta</span>
            <span class="n">rEphi_fields</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">re_phi</span>

            <span class="n">theta_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;Theta&quot;</span><span class="p">]</span>
            <span class="n">phi_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;Phi&quot;</span><span class="p">]</span>
            <span class="n">Ntheta</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">theta_range</span><span class="p">)</span>
            <span class="n">Nphi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">phi_range</span><span class="p">)</span>

        <span class="n">rEtheta_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">rEtheta_fields</span><span class="p">)</span>
        <span class="n">rEtheta_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">rEtheta_fields_sum</span><span class="p">,</span> <span class="p">(</span><span class="n">Ntheta</span><span class="p">,</span> <span class="n">Nphi</span><span class="p">))</span>

        <span class="n">rEphi_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">rEphi_fields</span><span class="p">)</span>
        <span class="n">rEphi_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">rEphi_fields_sum</span><span class="p">,</span> <span class="p">(</span><span class="n">Ntheta</span><span class="p">,</span> <span class="n">Nphi</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rEPhi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rEphi_fields_sum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rETheta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rEtheta_fields_sum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rETotal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">rEphi_fields_sum</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">rEtheta_fields_sum</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">theta_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phi_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;nPhi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Nphi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;nTheta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ntheta</span>
        <span class="n">pin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">w</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Pincident&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Incident Power: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pin</span><span class="p">)</span>
        <span class="n">real_gain</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rETotal&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="n">pin</span> <span class="o">/</span> <span class="mi">377</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_gain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;RealizedGain_dB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">real_gain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">real_gain</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_gain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">real_gain</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Peak Realized Gain: </span><span class="si">%s</span><span class="s2"> dB&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Element_Location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">array_positions</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span></div>

<div class="viewcode-block" id="FfdSolutionData.beamform_2beams"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.beamform_2beams.html#pyaedt.modules.solutions.FfdSolutionData.beamform_2beams">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">beamform_2beams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi_scan1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_scan1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">phi_scan2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_scan2</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute the far field pattern calculated for a specific phi/scan angle requested.</span>
<span class="sd">        This is calculated based on the lattice vector spacing and the embedded element</span>
<span class="sd">        patterns of a ca-ddm or fa-ddm array in HFSS.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        phi_scan1 : int, float</span>
<span class="sd">            Spherical cs for desired scan angle of beam.</span>
<span class="sd">        theta_scan1: : int, float</span>
<span class="sd">            Spherical cs for desired scan angle of beam.</span>
<span class="sd">        phi_scan2 : int, float</span>
<span class="sd">            Spherical cs for desired scan angle of second beam.</span>
<span class="sd">        theta_scan2 : int, float</span>
<span class="sd">            Spherical cs for desired scan angle of second beam.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict</span>
<span class="sd">            Updated quantities dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num_ports</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_center_and_edge</span><span class="p">()</span>

        <span class="n">c</span> <span class="o">=</span> <span class="mi">299792458</span>
        <span class="n">k</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span>

        <span class="c1"># ---------------------- METHOD : CalculatePhaseShifts -------------------</span>
        <span class="c1"># Calculates phase shifts between array elements in A and B directions,</span>
        <span class="c1"># PhaseShiftA and PhaseShiftB, given Wave Vector (k), lattice vectors</span>
        <span class="c1"># (Ax, Ay, Bx, By), Scan angles (theta, phi) using formula below</span>
        <span class="c1"># Phase Shift A = - (Ax*k*sin(theta)*cos(phi) + Ay*k*sin(theta)*sin(phi))</span>
        <span class="c1"># Phase Shift B = - (Bx*k*sin(theta)*cos(phi) + By*k*sin(theta)*sin(phi))</span>
        <span class="c1"># ------------------------------------------------------------------------</span>

        <span class="n">theta_scan1</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">theta_scan1</span><span class="p">)</span>
        <span class="n">phi_scan1</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">phi_scan1</span><span class="p">)</span>

        <span class="n">theta_scan2</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">theta_scan2</span><span class="p">)</span>
        <span class="n">phi_scan2</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">phi_scan2</span><span class="p">)</span>

        <span class="n">phase_shift_A_rad1</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan1</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_scan1</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan1</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_scan1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">phase_shift_B_rad1</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Bx</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan1</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_scan1</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">By</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan1</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_scan1</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">phase_shift_A_rad2</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ax</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan2</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_scan2</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Ay</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan2</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_scan2</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">phase_shift_B_rad2</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Bx</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan2</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_scan2</span><span class="p">))</span>
            <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">By</span> <span class="o">*</span> <span class="n">k</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_scan2</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_scan2</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">w_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">w_dict_ang</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">w_dict_mag</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">array_positions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">port_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">port_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">:</span>
            <span class="n">index_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_array_index</span><span class="p">(</span><span class="n">port_name</span><span class="p">)</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">index_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">index_str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">w_mag1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_weight</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">taper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">taper</span><span class="p">,</span> <span class="n">port_cont</span><span class="o">=</span><span class="n">port_count</span><span class="p">)),</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">w_ang1</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">phase_shift_A_rad1</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">phase_shift_B_rad1</span>

            <span class="n">w_mag2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_weight</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">taper</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">taper</span><span class="p">,</span> <span class="n">port_cont</span><span class="o">=</span><span class="n">port_count</span><span class="p">)),</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">w_ang2</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">phase_shift_A_rad2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">phase_shift_B_rad2</span>

            <span class="n">w_dict</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">w_mag1</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">w_ang1</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">w_mag2</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span> <span class="o">*</span> <span class="n">w_ang2</span><span class="p">)</span>
            <span class="n">w_dict_ang</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">w_dict</span><span class="p">[</span><span class="n">port_name</span><span class="p">])</span>
            <span class="n">w_dict_mag</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">w_dict</span><span class="p">[</span><span class="n">port_name</span><span class="p">])</span>

            <span class="n">array_positions</span><span class="p">[</span><span class="n">port_name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_location</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
            <span class="n">port_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">length_of_ff_data</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="s2">&quot;rETheta&quot;</span><span class="p">])</span>
        <span class="n">rEtheta_fields</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_ports</span><span class="p">,</span> <span class="n">length_of_ff_data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
        <span class="n">rEphi_fields</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_ports</span><span class="p">,</span> <span class="n">length_of_ff_data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_ports</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
        <span class="c1"># create port mapping</span>
        <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">port</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_port_names</span><span class="p">):</span>
            <span class="n">re_theta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;rETheta&quot;</span><span class="p">]</span>  <span class="c1"># this is re_theta index of loaded data</span>
            <span class="n">re_phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;rEPhi&quot;</span><span class="p">]</span>  <span class="c1"># this is re_ohi index of loaded data</span>

            <span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">w_dict</span><span class="p">[</span><span class="n">port</span><span class="p">]</span>  <span class="c1"># build 1xNumPorts array of weights</span>

            <span class="n">rEtheta_fields</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">re_theta</span>
            <span class="n">rEphi_fields</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">re_phi</span>

            <span class="n">theta_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;Theta&quot;</span><span class="p">]</span>
            <span class="n">phi_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dict</span><span class="p">[</span><span class="n">port</span><span class="p">][</span><span class="s2">&quot;Phi&quot;</span><span class="p">]</span>
            <span class="n">Ntheta</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">theta_range</span><span class="p">)</span>
            <span class="n">Nphi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">phi_range</span><span class="p">)</span>

        <span class="n">rEtheta_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">rEtheta_fields</span><span class="p">)</span>
        <span class="n">rEtheta_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">rEtheta_fields_sum</span><span class="p">,</span> <span class="p">(</span><span class="n">Ntheta</span><span class="p">,</span> <span class="n">Nphi</span><span class="p">))</span>

        <span class="n">rEphi_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">rEphi_fields</span><span class="p">)</span>
        <span class="n">rEphi_fields_sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">rEphi_fields_sum</span><span class="p">,</span> <span class="p">(</span><span class="n">Ntheta</span><span class="p">,</span> <span class="n">Nphi</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rEPhi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rEphi_fields_sum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rETheta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rEtheta_fields_sum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rETotal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">rEphi_fields_sum</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">rEtheta_fields_sum</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">theta_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phi_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;nPhi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Nphi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;nTheta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ntheta</span>
        <span class="n">pin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">w</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Pincident&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Incident Power: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pin</span><span class="p">)</span>
        <span class="n">real_gain</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;rETotal&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="n">pin</span> <span class="o">/</span> <span class="mi">377</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_gain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;RealizedGain_dB&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">real_gain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">real_gain</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_gain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">real_gain</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Peak Realized Gain: </span><span class="si">%s</span><span class="s2"> dB&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Element_Location&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">array_positions</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span></div>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_far_field_mesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qty_str</span><span class="o">=</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">,</span> <span class="n">convert_to_db</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">convert_to_db</span><span class="p">:</span>
            <span class="n">ff_data</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="n">qty_str</span><span class="p">])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">ff_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="n">qty_str</span><span class="p">]</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">]))</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_qtys</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mesh</span> <span class="o">=</span> <span class="n">get_structured_mesh</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span> <span class="n">ff_data</span><span class="o">=</span><span class="n">ff_data</span><span class="p">)</span>

<div class="viewcode-block" id="FfdSolutionData.get_lattice_vectors"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.get_lattice_vectors.html#pyaedt.modules.solutions.FfdSolutionData.get_lattice_vectors">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">get_lattice_vectors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compute Lattice vectors for Antenna Arrays or return default array in case of simple antenna analysis.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list of float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sbr_comp</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sbr_comp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">user_defined_components</span><span class="p">:</span>
            <span class="n">component_props</span> <span class="o">=</span> <span class="s2">&quot;NativeComponentDefinitionProvider&quot;</span>
            <span class="n">comp_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">user_defined_components</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sbr_comp</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;Project&quot;</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">comp_obj</span><span class="o">.</span><span class="n">native_properties</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="c1"># Project opened</span>
                <span class="n">project</span> <span class="o">=</span> <span class="n">comp_obj</span><span class="o">.</span><span class="n">native_properties</span><span class="p">[</span><span class="s2">&quot;Project&quot;</span><span class="p">]</span>
                <span class="n">proj_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">project</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">close</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">proj_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">project_list</span><span class="p">:</span>
                    <span class="n">close</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">odesktop</span><span class="o">.</span><span class="n">OpenProject</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
                <span class="n">comp</span> <span class="o">=</span> <span class="n">get_pyaedt_app</span><span class="p">(</span><span class="n">proj_name</span><span class="p">,</span> <span class="n">comp_obj</span><span class="o">.</span><span class="n">native_properties</span><span class="p">[</span><span class="s2">&quot;Design&quot;</span><span class="p">])</span>
                <span class="n">comp_units</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">model_units</span>
                <span class="n">lattice_vectors</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">omodelsetup</span><span class="o">.</span><span class="n">GetLatticeVectors</span><span class="p">()</span>
                <span class="n">source_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">comp</span><span class="o">.</span><span class="n">post</span><span class="o">.</span><span class="n">available_report_quantities</span><span class="p">(</span><span class="n">quantities_category</span><span class="o">=</span><span class="s2">&quot;VSWR&quot;</span><span class="p">)]</span>
                <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">source_names</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">str1</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">str1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">close</span><span class="p">:</span>
                    <span class="n">comp</span><span class="o">.</span><span class="n">close_project</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Project not opened</span>
                <span class="n">project</span> <span class="o">=</span> <span class="n">comp_obj</span><span class="o">.</span><span class="n">native_properties</span><span class="p">[</span><span class="n">component_props</span><span class="p">][</span><span class="s2">&quot;Project&quot;</span><span class="p">]</span>
                <span class="n">proj_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">project</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">close</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">proj_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">project_list</span><span class="p">:</span>
                    <span class="n">close</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">odesktop</span><span class="o">.</span><span class="n">OpenProject</span><span class="p">(</span><span class="n">project</span><span class="p">)</span>
                <span class="n">comp</span> <span class="o">=</span> <span class="n">get_pyaedt_app</span><span class="p">(</span><span class="n">proj_name</span><span class="p">,</span> <span class="n">comp_obj</span><span class="o">.</span><span class="n">native_properties</span><span class="p">[</span><span class="n">component_props</span><span class="p">][</span><span class="s2">&quot;Design&quot;</span><span class="p">])</span>
                <span class="n">lattice_vectors</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">omodelsetup</span><span class="o">.</span><span class="n">GetLatticeVectors</span><span class="p">()</span>
                <span class="n">comp_units</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">model_units</span>
                <span class="n">source_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">comp</span><span class="o">.</span><span class="n">post</span><span class="o">.</span><span class="n">available_report_quantities</span><span class="p">(</span><span class="n">quantities_category</span><span class="o">=</span><span class="s2">&quot;VSWR&quot;</span><span class="p">)]</span>
                <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">source_names</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">str1</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">str1</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_native_indexes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">close</span><span class="p">:</span>
                    <span class="n">comp</span><span class="o">.</span><span class="n">close_project</span><span class="p">(</span><span class="n">save_project</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="n">lattice_vectors</span> <span class="o">=</span> <span class="p">[</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">unit_converter</span><span class="p">(</span>
                    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lattice_vectors</span><span class="p">],</span>
                    <span class="n">unit_system</span><span class="o">=</span><span class="s2">&quot;Length&quot;</span><span class="p">,</span>
                    <span class="n">input_units</span><span class="o">=</span><span class="n">comp_units</span><span class="p">,</span>
                    <span class="n">output_units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">model_units</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">lattice_vectors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">omodelsetup</span><span class="o">.</span><span class="n">GetLatticeVectors</span><span class="p">()</span>
                <span class="n">lattice_vectors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="nb">float</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="o">*</span> <span class="n">AEDT_UNITS</span><span class="p">[</span><span class="s2">&quot;Length&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">model_units</span><span class="p">]</span> <span class="k">for</span> <span class="n">vec</span> <span class="ow">in</span> <span class="n">lattice_vectors</span>
                <span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">lattice_vectors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">lattice_vectors</span></div>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_export_all_ffd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">exported_name_base</span> <span class="o">=</span> <span class="s2">&quot;eep&quot;</span>
        <span class="n">exported_name_map</span> <span class="o">=</span> <span class="n">exported_name_base</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span>
        <span class="n">sol_setup_name_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setup_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">path_dict</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">frequency</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequencies</span><span class="p">:</span>
            <span class="n">full_setup_str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sol_setup_name_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sphere_name</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>
            <span class="n">export_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">/eep/&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">working_directory</span><span class="p">,</span> <span class="n">full_setup_str</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">remote_rpc_session</span><span class="p">:</span>
                <span class="n">settings</span><span class="o">.</span><span class="n">remote_rpc_session</span><span class="o">.</span><span class="n">filemanager</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">export_path</span><span class="p">)</span>
                <span class="n">file_exists</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">remote_rpc_session</span><span class="o">.</span><span class="n">filemanager</span><span class="o">.</span><span class="n">pathexists</span><span class="p">(</span>
                    <span class="n">export_path</span> <span class="o">+</span> <span class="n">exported_name_base</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">export_path</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">export_path</span><span class="p">)</span>
                <span class="n">file_exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">export_path</span> <span class="o">+</span> <span class="n">exported_name_base</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">file_exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">export_path</span> <span class="o">+</span> <span class="n">exported_name_base</span> <span class="o">+</span> <span class="s2">&quot;.txt&quot;</span><span class="p">)</span>
            <span class="n">path_dict</span><span class="o">.</span><span class="n">append</span><span class="p">({})</span>
            <span class="n">time_before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overwrite</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">file_exists</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exporting Embedded Element Patterns...&quot;</span><span class="p">)</span>
                <span class="n">var</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">variations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">var</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=&#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span>
                <span class="n">variation</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">oradfield</span><span class="o">.</span><span class="n">ExportElementPatternToFile</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="s2">&quot;ExportFileName:=&quot;</span><span class="p">,</span>
                            <span class="n">export_path</span> <span class="o">+</span> <span class="n">exported_name_base</span> <span class="o">+</span> <span class="s2">&quot;.ffd&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;SetupName:=&quot;</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">sphere_name</span><span class="p">,</span>
                            <span class="s2">&quot;IntrinsicVariationKey:=&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;Freq=&#39;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;DesignVariationKey:=&quot;</span><span class="p">,</span>
                            <span class="n">variation</span><span class="p">,</span>
                            <span class="s2">&quot;SolutionName:=&quot;</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">setup_name</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Failed to export one Element Pattern.&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">export_path</span> <span class="o">+</span> <span class="n">exported_name_base</span> <span class="o">+</span> <span class="s2">&quot;.ffd&quot;</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using Existing Embedded Element Patterns&quot;</span><span class="p">)</span>
            <span class="n">local_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">/eep/&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">remote_rpc_session_temp_folder</span><span class="p">,</span> <span class="n">full_setup_str</span><span class="p">)</span>
            <span class="n">export_path</span> <span class="o">=</span> <span class="n">check_and_download_folder</span><span class="p">(</span><span class="n">local_path</span><span class="p">,</span> <span class="n">export_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">export_path</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">exported_name_map</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">export_path</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">exported_name_map</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">reader</span><span class="p">:</span>
                    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">]</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># remove header</span>
                <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">port</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">port</span><span class="p">:</span>
                            <span class="n">port</span> <span class="o">=</span> <span class="n">port</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">path_dict</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">port</span><span class="p">]</span> <span class="o">=</span> <span class="n">export_path</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pattern</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;.ffd&quot;</span>
        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">time_before</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exporting Embedded Element Patterns...Done: </span><span class="si">%s</span><span class="s2"> seconds&quot;</span><span class="p">,</span> <span class="n">elapsed_time</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path_dict</span>

<div class="viewcode-block" id="FfdSolutionData.plot_farfield_contour"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.plot_farfield_contour.html#pyaedt.modules.solutions.FfdSolutionData.plot_farfield_contour">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">plot_farfield_contour</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qty_str</span><span class="o">=</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">,</span>
        <span class="n">phi_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">theta_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;RectangularPlot&quot;</span><span class="p">,</span>
        <span class="n">convert_to_db</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">export_image_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a Contour plot of specified quantity.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qty_str : str, optional</span>
<span class="sd">            Quantity to plot. Default `&quot;RealizedGain&quot;`.</span>
<span class="sd">        phi_scan : float, int, optional</span>
<span class="sd">            Phi Scan Angle in degree. Default `0`.</span>
<span class="sd">        theta_scan : float, int, optional</span>
<span class="sd">            Theta Scan Angle in degree. Default `0`.</span>
<span class="sd">        title : str, optional</span>
<span class="sd">            Plot title. Default `&quot;RectangularPlot&quot;`.</span>
<span class="sd">        convert_to_db : bool, optional</span>
<span class="sd">            Either if the quantity has to be converted in db or not. Default is `True`.</span>
<span class="sd">        export_image_path : str, optional</span>
<span class="sd">            Full path to image file. Default is None to not export.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`matplotlib.plt`</span>
<span class="sd">            Matplotlib fig object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">,</span> <span class="n">theta_scan</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">qty_str</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">qty_to_plot</span> <span class="o">=</span> <span class="n">data</span>
            <span class="n">qty_str</span> <span class="o">=</span> <span class="s2">&quot;Data&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">qty_to_plot</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">qty_str</span><span class="p">]</span>
        <span class="n">qty_to_plot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">qty_to_plot</span><span class="p">,</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;nTheta&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;nPhi&quot;</span><span class="p">]))</span>
        <span class="n">th</span><span class="p">,</span> <span class="n">ph</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">convert_to_db</span><span class="p">:</span>
            <span class="n">factor</span> <span class="o">=</span> <span class="mi">20</span>
            <span class="k">if</span> <span class="s2">&quot;Gain&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span><span class="p">:</span>
                <span class="n">factor</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="n">qty_to_plot</span> <span class="o">=</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">qty_to_plot</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">plot_contour</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">th</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">ph</span><span class="p">,</span>
            <span class="n">qty_to_plot</span><span class="o">=</span><span class="n">qty_to_plot</span><span class="p">,</span>
            <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Theta (degree)&quot;</span><span class="p">,</span>
            <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Phi (degree)&quot;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">,</span>
            <span class="n">snapshot_path</span><span class="o">=</span><span class="n">export_image_path</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FfdSolutionData.plot_2d_cut"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.plot_2d_cut.html#pyaedt.modules.solutions.FfdSolutionData.plot_2d_cut">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">plot_2d_cut</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qty_str</span><span class="o">=</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">,</span>
        <span class="n">primary_sweep</span><span class="o">=</span><span class="s2">&quot;phi&quot;</span><span class="p">,</span>
        <span class="n">secondary_sweep_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">phi_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">theta_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Far Field Cut&quot;</span><span class="p">,</span>
        <span class="n">convert_to_db</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">export_image_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a 2D plot of specified quantity in matplotlib.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qty_str : str, optional</span>
<span class="sd">            Quantity to plot. Default `&quot;RealizedGain&quot;`.</span>
<span class="sd">        primary_sweep : str, optional.</span>
<span class="sd">            X Axis variable. Default is `&quot;phi&quot;`. Option is  `&quot;theta&quot;`.</span>
<span class="sd">        secondary_sweep_value : float, list, string, optional</span>
<span class="sd">            List of cuts on secondary sweep to plot. Options are `&quot;all&quot;`, single value float or list of float.</span>
<span class="sd">        phi_scan : float, int, optional</span>
<span class="sd">            Phi Scan Angle in degree. Default `0`.</span>
<span class="sd">        theta_scan : float, int, optional</span>
<span class="sd">            Theta Scan Angle in degree. Default `0`.</span>
<span class="sd">        title : str, optional</span>
<span class="sd">            Plot title. Default `&quot;RectangularPlot&quot;`.</span>
<span class="sd">        convert_to_db : bool, optional</span>
<span class="sd">            Either if the quantity has to be converted in db or not. Default is `True`.</span>
<span class="sd">        export_image_path : str, optional</span>
<span class="sd">            Full path to image file. Default is None to not export.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        :class:`matplotlib.plt`</span>
<span class="sd">            Matplotlib fig object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">,</span> <span class="n">theta_scan</span><span class="p">)</span>

        <span class="n">data_to_plot</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">qty_str</span><span class="p">]</span>
        <span class="n">curves</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">primary_sweep</span> <span class="o">==</span> <span class="s2">&quot;phi&quot;</span><span class="p">:</span>
            <span class="n">x_key</span> <span class="o">=</span> <span class="s2">&quot;Phi&quot;</span>
            <span class="n">y_key</span> <span class="o">=</span> <span class="s2">&quot;Theta&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">y_key</span> <span class="o">=</span> <span class="s2">&quot;Phi&quot;</span>
            <span class="n">x_key</span> <span class="o">=</span> <span class="s2">&quot;Theta&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">x_key</span><span class="p">]</span>
        <span class="n">xlabel</span> <span class="o">=</span> <span class="n">x_key</span>
        <span class="k">if</span> <span class="n">x_key</span> <span class="o">==</span> <span class="s2">&quot;Phi&quot;</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">data_to_plot</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">data_to_plot</span><span class="o">.</span><span class="n">T</span>
        <span class="k">if</span> <span class="n">secondary_sweep_value</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">y_key</span><span class="p">]:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y_key</span><span class="p">],</span> <span class="n">el</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">convert_to_db</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;Gain&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span> <span class="ow">or</span> <span class="s2">&quot;Dir&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span><span class="p">:</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="n">curves</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y_key</span><span class="p">,</span> <span class="n">el</span><span class="p">)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">secondary_sweep_value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">list_inserted</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">secondary_sweep_value</span><span class="p">:</span>
                <span class="n">theta_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y_key</span><span class="p">],</span> <span class="n">el</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">theta_idx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_inserted</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">theta_idx</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">convert_to_db</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;Gain&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span> <span class="ow">or</span> <span class="s2">&quot;Dir&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span><span class="p">:</span>
                            <span class="n">y</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">y</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="n">curves</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y_key</span><span class="p">,</span> <span class="n">el</span><span class="p">)])</span>
                    <span class="n">list_inserted</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta_idx</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta_idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_nearest</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y_key</span><span class="p">],</span> <span class="n">secondary_sweep_value</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[</span><span class="n">theta_idx</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">convert_to_db</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;Gain&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span> <span class="ow">or</span> <span class="s2">&quot;Dir&quot;</span> <span class="ow">in</span> <span class="n">qty_str</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="n">curves</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y_key</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">y_key</span><span class="p">][</span><span class="n">theta_idx</span><span class="p">])])</span>
        <span class="n">show_legend</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">curves</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
            <span class="n">show_legend</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">plot_2d_chart</span><span class="p">(</span>
            <span class="n">curves</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="n">qty_str</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">snapshot_path</span><span class="o">=</span><span class="n">export_image_path</span><span class="p">,</span> <span class="n">show_legend</span><span class="o">=</span><span class="n">show_legend</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FfdSolutionData.polar_plot_3d"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.polar_plot_3d.html#pyaedt.modules.solutions.FfdSolutionData.polar_plot_3d">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">polar_plot_3d</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qty_str</span><span class="o">=</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">,</span>
        <span class="n">phi_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">theta_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;3D Plot&quot;</span><span class="p">,</span>
        <span class="n">convert_to_db</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">export_image_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a 3d plot of specified quantity.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qty_str : str, optional</span>
<span class="sd">            Quantity to plot. Default `&quot;RealizedGain&quot;`.</span>
<span class="sd">        phi_scan : float, int, optional</span>
<span class="sd">            Phi Scan Angle in degree. Default `0`.</span>
<span class="sd">        theta_scan : float, int, optional</span>
<span class="sd">            Theta Scan Angle in degree. Default `0`.</span>
<span class="sd">        title : str, optional</span>
<span class="sd">            Plot title. Default `&quot;3D Plot&quot;`.</span>
<span class="sd">        convert_to_db : bool, optional</span>
<span class="sd">            Either if the quantity has to be converted in db or not. Default is `True`.</span>
<span class="sd">        export_image_path : str, optional</span>
<span class="sd">            Full path to image file. Default is None to not export.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">(</span><span class="n">phi_scan</span><span class="p">,</span> <span class="n">theta_scan</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">convert_to_db</span><span class="p">:</span>
            <span class="n">ff_data</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">qty_str</span><span class="p">])</span>
            <span class="c1"># renormalize to 0 and 1</span>
            <span class="n">ff_max_dB</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ff_data</span><span class="p">)</span>
            <span class="n">ff_min_dB</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ff_data</span><span class="p">)</span>
            <span class="n">ff_data_renorm</span> <span class="o">=</span> <span class="p">(</span><span class="n">ff_data</span> <span class="o">-</span> <span class="n">ff_min_dB</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">ff_max_dB</span> <span class="o">-</span> <span class="n">ff_min_dB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ff_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">qty_str</span><span class="p">]</span>
            <span class="c1"># renormalize to 0 and 1</span>
            <span class="n">ff_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">ff_data</span><span class="p">)</span>
            <span class="n">ff_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">ff_data</span><span class="p">)</span>
            <span class="n">ff_data_renorm</span> <span class="o">=</span> <span class="p">(</span><span class="n">ff_data</span> <span class="o">-</span> <span class="n">ff_max</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">ff_max</span> <span class="o">-</span> <span class="n">ff_min</span><span class="p">)</span>

        <span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">]))</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">]))</span>
        <span class="n">phi_grid</span><span class="p">,</span> <span class="n">theta_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ff_data_renorm</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Theta&quot;</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;Phi&quot;</span><span class="p">])))</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_grid</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi_grid</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_grid</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi_grid</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta_grid</span><span class="p">)</span>
        <span class="n">plot_3d_chart</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">],</span> <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Theta&quot;</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Phi&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">snapshot_path</span><span class="o">=</span><span class="n">export_image_path</span><span class="p">)</span></div>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_get_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_antenna_array</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">time_before</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exporting Geometry...&quot;</span><span class="p">)</span>

        <span class="c1"># obj is being exported as model units, scaling factor needed for display</span>
        <span class="n">sf</span> <span class="o">=</span> <span class="n">AEDT_UNITS</span><span class="p">[</span><span class="s2">&quot;Length&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">model_units</span><span class="p">]</span>

        <span class="n">bounding_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">obounding_box</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">bounding_box</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">bounding_box</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ymax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">bounding_box</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">bounding_box</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">zmax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">bounding_box</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">bounding_box</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

        <span class="n">geo_path</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="se">\\</span><span class="s2">geo</span><span class="se">\\</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">working_directory</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">geo_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">geo_path</span><span class="p">)</span>

        <span class="n">model_pv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">post</span><span class="o">.</span><span class="n">get_model_plotter_geometries</span><span class="p">(</span><span class="n">plot_air_objects</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">obj_meshes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">is_antenna_array</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">model_pv</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Element_Location&quot;</span><span class="p">]:</span>
                    <span class="n">mesh</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">_cached_polydata</span>
                    <span class="n">translated_mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">offset_xyz</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Element_Location&quot;</span><span class="p">][</span><span class="n">each</span><span class="p">]</span> <span class="o">/</span> <span class="n">sf</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">offset_xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">xmax</span><span class="p">:</span>  <span class="c1"># assume array is centere, factor of 2</span>
                        <span class="n">xmax</span> <span class="o">=</span> <span class="n">offset_xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">offset_xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">ymax</span><span class="p">:</span>  <span class="c1"># assume array is centere, factor of 2</span>
                        <span class="n">ymax</span> <span class="o">=</span> <span class="n">offset_xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
                    <span class="n">translated_mesh</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">offset_xyz</span>
                    <span class="n">translated_mesh</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">offset_xyz</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">color_cad</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">/</span> <span class="mi">255</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">color</span><span class="p">]</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj_meshes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">:</span>
                        <span class="n">obj_meshes</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">translated_mesh</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">obj_meshes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">translated_mesh</span><span class="p">,</span> <span class="n">color_cad</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">opacity</span><span class="p">])</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">center</span><span class="p">:</span>
                    <span class="n">center</span> <span class="o">=</span> <span class="n">obj_meshes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">center</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">obj_meshes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="n">center</span><span class="p">)]</span>
        <span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">k</span> <span class="o">/</span> <span class="n">i</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">center</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span><span class="p">]))</span>
        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">time_before</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Exporting Geometry...Done: </span><span class="si">%s</span><span class="s2"> seconds&quot;</span><span class="p">,</span> <span class="n">elapsed_time</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">mesh</span> <span class="ow">in</span> <span class="n">obj_meshes</span><span class="p">:</span>
            <span class="n">mesh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj_meshes</span>

<div class="viewcode-block" id="FfdSolutionData.polar_plot_3d_pyvista"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.polar_plot_3d_pyvista.html#pyaedt.modules.solutions.FfdSolutionData.polar_plot_3d_pyvista">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">polar_plot_3d_pyvista</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qty_str</span><span class="o">=</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">,</span>
        <span class="n">convert_to_db</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">rotation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">export_image_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">show_as_standalone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a 3d Polar Plot of Geometry with Radiation Pattern in Pyvista.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qty_str : str, optional</span>
<span class="sd">            Quantity to plot. Default `&quot;RealizedGain&quot;`.</span>
<span class="sd">        convert_to_db : bool, optional</span>
<span class="sd">            Either if the quantity has to be converted in db or not. Default is `True`.</span>
<span class="sd">        export_image_path : str, optional</span>
<span class="sd">            Full path to image file. Default is None to not export.</span>
<span class="sd">        position : list, optional</span>
<span class="sd">            It can be a list of numpy list of origin of plot. Default is [0,0,0].</span>
<span class="sd">        rotation : list, optional</span>
<span class="sd">            It can be a list of numpy list of origin of plot.</span>
<span class="sd">            Default is [[1., 0., 0.], [0., 1., 0.], [0., 0., 1.]].</span>
<span class="sd">        show : bool, optional</span>
<span class="sd">            Either if the plot has to be shown or not. Default is `True`.</span>
<span class="sd">        show_as_standalone : bool, optional</span>
<span class="sd">            Either if the plot has to be shown as standalone or not. Default is `True`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool or :class:`Pyvista.Plotter`</span>
<span class="sd">            Return :class:`Pyvista.Plotter` in case show and export_image_path is `False`.</span>
<span class="sd">            In other cases return ``True`` when successful.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">position</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rotation</span><span class="p">:</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beamform</span><span class="p">(</span><span class="n">phi_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_scan</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">plot_min</span> <span class="o">=</span> <span class="o">-</span><span class="mi">40</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_far_field_mesh</span><span class="p">(</span><span class="n">qty_str</span><span class="o">=</span><span class="n">qty_str</span><span class="p">,</span> <span class="n">convert_to_db</span><span class="o">=</span><span class="n">convert_to_db</span><span class="p">)</span>

        <span class="c1"># plot everything together</span>
        <span class="n">rotation_euler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_to_euler_angles</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">export_image_path</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">off_screen</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">off_screen</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">show</span>

        <span class="k">if</span> <span class="n">show_as_standalone</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">(</span><span class="n">notebook</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">off_screen</span><span class="o">=</span><span class="n">off_screen</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">(</span><span class="n">notebook</span><span class="o">=</span><span class="n">is_notebook</span><span class="p">(),</span> <span class="n">off_screen</span><span class="o">=</span><span class="n">off_screen</span><span class="p">)</span>

        <span class="n">uf</span> <span class="o">=</span> <span class="n">UpdateBeamForm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
            <span class="n">uf</span><span class="o">.</span><span class="n">update_phi</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Phi&quot;</span><span class="p">,</span>
            <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.55</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.74</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;always&quot;</span><span class="p">,</span>
            <span class="n">title_height</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
            <span class="n">uf</span><span class="o">.</span><span class="n">update_theta</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Theta&quot;</span><span class="p">,</span>
            <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.77</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.98</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;always&quot;</span><span class="p">,</span>
            <span class="n">title_height</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># sargs = dict(height=0.4, vertical=True, position_x=0.05, position_y=0.5)</span>
        <span class="n">sargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">title_font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
            <span class="n">label_font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">shadow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">n_labels</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
            <span class="n">italic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%.1f</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">font_family</span><span class="o">=</span><span class="s2">&quot;arial&quot;</span><span class="p">,</span>
            <span class="n">vertical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">position_x</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
            <span class="n">position_y</span><span class="o">=</span><span class="mf">0.65</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="mf">0.06</span><span class="p">,</span>
            <span class="n">outline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># ff_mesh_inst = p.add_mesh(uf.output,smooth_shading=True,cmap=&quot;jet&quot;,scalar_bar_args=sargs,opacity=0.5)</span>
        <span class="c1"># not sure why, but smooth_shading causes this to not update</span>

        <span class="n">ff_mesh_inst</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">uf</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;jet&quot;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">[</span><span class="n">plot_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">],</span> <span class="n">scalar_bar_args</span><span class="o">=</span><span class="n">sargs</span><span class="p">)</span>
        <span class="n">cad_mesh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_geometry</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cad_mesh</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">toggle_vis_ff</span><span class="p">(</span><span class="n">flag</span><span class="p">):</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetVisibility</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">toggle_vis_cad</span><span class="p">(</span><span class="n">flag</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cad</span><span class="p">:</span>
                    <span class="n">i</span><span class="o">.</span><span class="n">SetVisibility</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetScale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetOrientation</span><span class="p">(</span><span class="n">rotation_euler</span><span class="p">)</span>
                <span class="c1"># p.add_mesh(ff_mesh, smooth_shading=True,cmap=&quot;jet&quot;)</span>
                <span class="k">return</span>

            <span class="n">p</span><span class="o">.</span><span class="n">add_checkbox_button_widget</span><span class="p">(</span><span class="n">toggle_vis_ff</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s2">&quot;Show Far Fields&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">slider_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_max</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">slider_max</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">slider_min</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">slider_max</span> <span class="o">/</span> <span class="mi">3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">slider_min</span> <span class="o">=</span> <span class="n">slider_max</span>
                <span class="n">slider_max</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">slider_min</span> <span class="o">/</span> <span class="mi">3</span>

            <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
                <span class="n">scale</span><span class="p">,</span>
                <span class="p">[</span><span class="n">slider_min</span><span class="p">,</span> <span class="n">slider_max</span><span class="p">],</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Scale Plot&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span>
                <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">),</span>
                <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
                <span class="n">title_height</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">cad</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">cm</span> <span class="ow">in</span> <span class="n">cad_mesh</span><span class="p">:</span>
                <span class="n">cad</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">cm</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">cm</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">show_scalar_bar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">cm</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_checkbox_button_widget</span><span class="p">(</span><span class="n">toggle_vis_cad</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s2">&quot;Show Geometry&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">export_image_path</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">screenshot</span><span class="o">=</span><span class="n">export_image_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">show</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">p</span></div>

<div class="viewcode-block" id="FfdSolutionData.polar_plot_3d_pyvista_2beams"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FfdSolutionData.polar_plot_3d_pyvista_2beams.html#pyaedt.modules.solutions.FfdSolutionData.polar_plot_3d_pyvista_2beams">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">polar_plot_3d_pyvista_2beams</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qty_str</span><span class="o">=</span><span class="s2">&quot;RealizedGain&quot;</span><span class="p">,</span>
        <span class="n">convert_to_db</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">rotation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">export_image_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>  <span class="c1"># pragma: no cover</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a 3d Polar Plot with 2 beams of Geometry with Radiation Pattern in Pyvista.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        qty_str : str, optional</span>
<span class="sd">            Quantity to plot. Default `&quot;RealizedGain&quot;`.</span>
<span class="sd">        convert_to_db : bool, optional</span>
<span class="sd">            Either if the quantity has to be converted in db or not. Default is `True`.</span>
<span class="sd">        export_image_path : str, optional</span>
<span class="sd">            Full path to image file. Default is None to not export.</span>
<span class="sd">        position : list, optional</span>
<span class="sd">            It can be a list of numpy list of origin of plot. Default is [0,0,0].</span>
<span class="sd">        rotation : list, optional</span>
<span class="sd">            It can be a list of numpy list of origin of plot.</span>
<span class="sd">            Default is [[1., 0., 0.], [0., 1., 0.], [0., 0., 1.]].</span>
<span class="sd">        show : bool, optional</span>
<span class="sd">            Either if the plot has to be shown or not. Default is `True`.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool or :class:`Pyvista.Plotter`</span>
<span class="sd">            Return :class:`Pyvista.Plotter` in case show and export_image_path is `False`.</span>
<span class="sd">            In other cases return ``True`` when successful.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">position</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rotation</span><span class="p">:</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beamform_2beams</span><span class="p">(</span><span class="n">phi_scan1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_scan1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">phi_scan2</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">theta_scan2</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_get_far_field_mesh</span><span class="p">(</span><span class="n">qty_str</span><span class="o">=</span><span class="n">qty_str</span><span class="p">,</span> <span class="n">convert_to_db</span><span class="o">=</span><span class="n">convert_to_db</span><span class="p">)</span>

        <span class="n">uf</span> <span class="o">=</span> <span class="n">Update2BeamForms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">)</span>
        <span class="n">rotation_euler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rotation_to_euler_angles</span><span class="p">(</span><span class="n">rotation</span><span class="p">)</span> <span class="o">*</span> <span class="mi">180</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">export_image_path</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">off_screen</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">off_screen</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">show</span>

        <span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">(</span><span class="n">notebook</span><span class="o">=</span><span class="n">is_notebook</span><span class="p">(),</span> <span class="n">off_screen</span><span class="o">=</span><span class="n">off_screen</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="p">[</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">768</span><span class="p">])</span>

        <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
            <span class="n">uf</span><span class="o">.</span><span class="n">update_phi1</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Phi1&quot;</span><span class="p">,</span>
            <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;always&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
            <span class="n">uf</span><span class="o">.</span><span class="n">update_theta1</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Theta1&quot;</span><span class="p">,</span>
            <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.67</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.98</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;always&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
            <span class="n">uf</span><span class="o">.</span><span class="n">update_phi2</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">360</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Phi2&quot;</span><span class="p">,</span>
            <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">),</span>
            <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;always&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span>
            <span class="n">uf</span><span class="o">.</span><span class="n">update_theta2</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Theta2&quot;</span><span class="p">,</span>
            <span class="n">pointa</span><span class="o">=</span><span class="p">(</span><span class="mf">0.67</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">),</span>
            <span class="n">pointb</span><span class="o">=</span><span class="p">(</span><span class="mf">0.98</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">),</span>
            <span class="n">style</span><span class="o">=</span><span class="s2">&quot;modern&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="s2">&quot;always&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">sargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">vertical</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">position_x</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">position_y</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="c1"># ff_mesh_inst = p.add_mesh(uf.output,smooth_shading=True,cmap=&quot;jet&quot;,scalar_bar_args=sargs,opacity=0.5)</span>
        <span class="c1"># not sure why, but smooth_shading causes this to not update</span>
        <span class="n">plot_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_gain</span>
        <span class="n">ff_mesh_inst</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">uf</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;jet&quot;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">[</span><span class="n">plot_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">],</span> <span class="n">scalar_bar_args</span><span class="o">=</span><span class="n">sargs</span><span class="p">)</span>
        <span class="n">cad_mesh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_geometry</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cad_mesh</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">toggle_vis_ff</span><span class="p">(</span><span class="n">flag</span><span class="p">):</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetVisibility</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">toggle_vis_cad</span><span class="p">(</span><span class="n">flag</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cad</span><span class="p">:</span>
                    <span class="n">i</span><span class="o">.</span><span class="n">SetVisibility</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>

            <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetScale</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetPosition</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
                <span class="n">ff_mesh_inst</span><span class="o">.</span><span class="n">SetOrientation</span><span class="p">(</span><span class="n">rotation_euler</span><span class="p">)</span>
                <span class="c1"># p.add_mesh(ff_mesh, smooth_shading=True,cmap=&quot;jet&quot;)</span>
                <span class="k">return</span>

            <span class="n">p</span><span class="o">.</span><span class="n">add_checkbox_button_widget</span><span class="p">(</span><span class="n">toggle_vis_ff</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s2">&quot;Show Far Fields&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
            <span class="n">slider_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_max</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_gain</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">slider_max</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">slider_min</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">slider_max</span> <span class="o">/</span> <span class="mi">3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">slider_min</span> <span class="o">=</span> <span class="n">slider_max</span>
                <span class="n">slider_max</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">slider_min</span> <span class="o">/</span> <span class="mi">3</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_slider_widget</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">slider_max</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Scale Plot&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>

            <span class="k">if</span> <span class="s2">&quot;MaterialIds&quot;</span> <span class="ow">in</span> <span class="n">cad_mesh</span><span class="o">.</span><span class="n">array_names</span><span class="p">:</span>
                <span class="n">color_display_type</span> <span class="o">=</span> <span class="n">cad_mesh</span><span class="p">[</span><span class="s2">&quot;MaterialIds&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color_display_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">cad</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">cm</span> <span class="ow">in</span> <span class="n">cad_mesh</span><span class="p">:</span>
                <span class="n">cad</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">cm</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">cm</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">show_scalar_bar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="n">cm</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">window_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">40</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_checkbox_button_widget</span><span class="p">(</span><span class="n">toggle_vis_cad</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">70</span><span class="p">))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">add_text</span><span class="p">(</span><span class="s2">&quot;Show Geometry&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">export_image_path</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">screenshot</span><span class="o">=</span><span class="n">export_image_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">p</span></div>

    <span class="nd">@staticmethod</span>
    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_find_nearest</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="ow">or</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">array</span><span class="p">[</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">value</span> <span class="o">-</span> <span class="n">array</span><span class="p">[</span><span class="n">idx</span><span class="p">])):</span>
            <span class="k">return</span> <span class="n">idx</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">idx</span>

    <span class="nd">@staticmethod</span>
    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_rotation_to_euler_angles</span><span class="p">(</span><span class="n">R</span><span class="p">):</span>
        <span class="n">sy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">R</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">R</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">singular</span> <span class="o">=</span> <span class="n">sy</span> <span class="o">&lt;</span> <span class="mf">1e-6</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">singular</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">R</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="o">-</span><span class="n">R</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">sy</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="o">-</span><span class="n">R</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">R</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="o">-</span><span class="n">R</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">sy</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span></div>


<span class="k">class</span> <span class="nc">UpdateBeamForm</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ff</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phi</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># default parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span> <span class="o">=</span> <span class="n">ff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qty_str</span> <span class="o">=</span> <span class="s2">&quot;RealizedGain&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_db</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_update_both</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">beamform</span><span class="p">(</span><span class="n">phi_scan</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_phi</span><span class="p">,</span> <span class="n">theta_scan</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_theta</span><span class="p">)</span>
        <span class="c1"># perc_of_maxgain= self.ff.max_gain/self.max_value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">_get_far_field_mesh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qty_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_db</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">overwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">update_phi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the Pyvista Plot with new phi value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phi</span> <span class="o">=</span> <span class="n">phi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_both</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the Pyvista Plot with new theta value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta</span> <span class="o">=</span> <span class="n">theta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_both</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">Update2BeamForms</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ff</span><span class="p">,</span> <span class="n">max_value</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span> <span class="o">=</span> <span class="n">max_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">mesh</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phi1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phi2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># default parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span> <span class="o">=</span> <span class="n">ff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qty_str</span> <span class="o">=</span> <span class="s2">&quot;RealizedGain&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_db</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_update_both</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">beamform_2beams</span><span class="p">(</span>
            <span class="n">phi_scan1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_phi1</span><span class="p">,</span> <span class="n">theta_scan1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_theta1</span><span class="p">,</span> <span class="n">phi_scan2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_phi2</span><span class="p">,</span> <span class="n">theta_scan2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_theta2</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">_get_far_field_mesh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qty_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_db</span><span class="p">)</span>
        <span class="n">current_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">mesh</span><span class="p">[</span><span class="s2">&quot;FarFieldData&quot;</span><span class="p">])</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span> <span class="o">-</span> <span class="n">current_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">mesh</span><span class="p">[</span><span class="s2">&quot;FarFieldData&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">mesh</span><span class="p">[</span><span class="s2">&quot;FarFieldData&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">overwrite</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ff</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">update_phi1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the Pyvista Plot with new phi1 value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phi1</span> <span class="o">=</span> <span class="n">phi1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_both</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_theta1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the Pyvista Plot with new theta1 value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta1</span> <span class="o">=</span> <span class="n">theta1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_both</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_phi2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the Pyvista Plot with new phi2 value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phi2</span> <span class="o">=</span> <span class="n">phi2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_both</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_theta2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theta2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the Pyvista Plot with new theta2 value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_theta2</span> <span class="o">=</span> <span class="n">theta2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_both</span><span class="p">()</span>


<div class="viewcode-block" id="FieldPlot"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.html#pyaedt.modules.solutions.FieldPlot">[docs]</a><span class="k">class</span> <span class="nc">FieldPlot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates and edits field plots.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    postprocessor : :class:`pyaedt.modules.PostProcessor.PostProcessor`</span>

<span class="sd">    objlist : list</span>
<span class="sd">        List of objects.</span>
<span class="sd">    solutionName : str</span>
<span class="sd">        Name of the solution.</span>
<span class="sd">    quantityName : str</span>
<span class="sd">        Name of the plot or the name of the object.</span>
<span class="sd">    intrinsincList : dict, optional</span>
<span class="sd">        Name of the intrinsic dictionary. The default is ``{}``.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">postprocessor</span><span class="p">,</span>
        <span class="n">objlist</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">surfacelist</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">linelist</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">cutplanelist</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">solutionName</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">quantityName</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">intrinsincList</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">seedingFaces</span><span class="o">=</span><span class="p">[],</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span> <span class="o">=</span> <span class="n">postprocessor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oField</span> <span class="o">=</span> <span class="n">postprocessor</span><span class="o">.</span><span class="n">ofieldsreporter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span> <span class="o">=</span> <span class="n">objlist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span> <span class="o">=</span> <span class="n">surfacelist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_indexes</span> <span class="o">=</span> <span class="n">linelist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cutplane_indexes</span> <span class="o">=</span> <span class="n">cutplanelist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span> <span class="o">=</span> <span class="n">seedingFaces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solutionName</span> <span class="o">=</span> <span class="n">solutionName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantityName</span> <span class="o">=</span> <span class="n">quantityName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span> <span class="o">=</span> <span class="n">intrinsincList</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Field_Plot&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotFolder</span> <span class="o">=</span> <span class="s2">&quot;Field_Plot&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Filled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">IsoVal</span> <span class="o">=</span> <span class="s2">&quot;Fringe&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SmoothShade</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">AddGrid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MapTransparency</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refinement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Transparency</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SmoothingLevel</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ArrowUniform</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ArrowSpacing</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MinArrowSpacing</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">MaxArrowSpacing</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">GridColor</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PlotIsoSurface</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PointSize</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CloudSpacing</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CloudMinSpacing</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CloudMaxSpacing</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LineWidth</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LineStyle</span> <span class="o">=</span> <span class="s2">&quot;Cylinder&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">IsoValType</span> <span class="o">=</span> <span class="s2">&quot;Tone&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NumofPoints</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">TraceStepLength</span> <span class="o">=</span> <span class="s2">&quot;0.001mm&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">UseAdaptiveStep</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SeedingSamplingOption</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SeedingPointsNumber</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FractionOfMaximum</span> <span class="o">=</span> <span class="mf">0.8</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">plotGeomInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Plot geometry information.&quot;&quot;&quot;</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cutplane_indexes</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_indexes</span><span class="p">:</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">info</span> <span class="o">=</span> <span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Volume&quot;</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ObjList&quot;</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">:</span>
            <span class="n">model_faces</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">nonmodel_faces</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">models</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">model_objects</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">FacePrimitive</span><span class="p">):</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">id</span>
                    <span class="n">oname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">oeditor</span><span class="o">.</span><span class="n">GetObjectNameByFaceID</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">oname</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
                        <span class="n">model_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">nonmodel_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Surface&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">model_faces</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;FacesList&quot;</span><span class="p">)</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model_faces</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">model_faces</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nonmodel_faces</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;NonModelFaceList&quot;</span><span class="p">)</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nonmodel_faces</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">nonmodel_faces</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cutplane_indexes</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Surface&quot;</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CutPlane&quot;</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cutplane_indexes</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cutplane_indexes</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_indexes</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Line&quot;</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_indexes</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_indexes</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">info</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">intrinsicVar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Intrinsic variable.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list or dict</span>
<span class="sd">            List or dictionary of the variables for the field plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">var</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="s2">&quot;:=&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ll</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:=&quot;</span><span class="p">)</span>
                <span class="n">var</span> <span class="o">+=</span> <span class="n">ll</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;=&#39;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39; &quot;</span>
                <span class="n">l</span> <span class="o">+=</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">:</span>
                <span class="n">var</span> <span class="o">+=</span> <span class="n">a</span> <span class="o">+</span> <span class="s2">&quot;=&#39;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsincList</span><span class="p">[</span><span class="n">a</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&#39; &quot;</span>
        <span class="k">return</span> <span class="n">var</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">plotsettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Plot settings.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of plot settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">cutplane_indexes</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;NAME:PlotOnSurfaceSettings&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Filled:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Filled</span><span class="p">,</span>
                <span class="s2">&quot;IsoValType:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">IsoVal</span><span class="p">,</span>
                <span class="s2">&quot;SmoothShade:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SmoothShade</span><span class="p">,</span>
                <span class="s2">&quot;AddGrid:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">AddGrid</span><span class="p">,</span>
                <span class="s2">&quot;MapTransparency:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MapTransparency</span><span class="p">,</span>
                <span class="s2">&quot;Refinement:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Refinement</span><span class="p">,</span>
                <span class="s2">&quot;Transparency:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Transparency</span><span class="p">,</span>
                <span class="s2">&quot;SmoothingLevel:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SmoothingLevel</span><span class="p">,</span>
                <span class="p">[</span>
                    <span class="s2">&quot;NAME:Arrow3DSpacingSettings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ArrowUniform:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ArrowUniform</span><span class="p">,</span>
                    <span class="s2">&quot;ArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ArrowSpacing</span><span class="p">,</span>
                    <span class="s2">&quot;MinArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MinArrowSpacing</span><span class="p">,</span>
                    <span class="s2">&quot;MaxArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MaxArrowSpacing</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="s2">&quot;GridColor:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">GridColor</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_indexes</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;NAME:PlotOnLineSettings&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="s2">&quot;NAME:LineSettingsID&quot;</span><span class="p">,</span> <span class="s2">&quot;Width:=&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LineWidth</span><span class="p">,</span> <span class="s2">&quot;Style:=&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LineStyle</span><span class="p">],</span>
                <span class="s2">&quot;IsoValType:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">IsoValType</span><span class="p">,</span>
                <span class="s2">&quot;ArrowUniform:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ArrowUniform</span><span class="p">,</span>
                <span class="s2">&quot;NumofArrow:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">NumofPoints</span><span class="p">,</span>
                <span class="s2">&quot;Refinement:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Refinement</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;NAME:PlotOnVolumeSettings&quot;</span><span class="p">,</span>
                <span class="s2">&quot;PlotIsoSurface:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PlotIsoSurface</span><span class="p">,</span>
                <span class="s2">&quot;PointSize:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PointSize</span><span class="p">,</span>
                <span class="s2">&quot;Refinement:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Refinement</span><span class="p">,</span>
                <span class="s2">&quot;CloudSpacing:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CloudSpacing</span><span class="p">,</span>
                <span class="s2">&quot;CloudMinSpacing:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CloudMinSpacing</span><span class="p">,</span>
                <span class="s2">&quot;CloudMaxSpacing:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CloudMaxSpacing</span><span class="p">,</span>
                <span class="p">[</span>
                    <span class="s2">&quot;NAME:Arrow3DSpacingSettings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ArrowUniform:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ArrowUniform</span><span class="p">,</span>
                    <span class="s2">&quot;ArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ArrowSpacing</span><span class="p">,</span>
                    <span class="s2">&quot;MinArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MinArrowSpacing</span><span class="p">,</span>
                    <span class="s2">&quot;MaxArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MaxArrowSpacing</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">arg</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">surfacePlotInstruction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Surface plot settings.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of surface plot settings.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s2">&quot;NAME:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;SolutionName:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solutionName</span><span class="p">,</span>
            <span class="s2">&quot;QuantityName:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">quantityName</span><span class="p">,</span>
            <span class="s2">&quot;PlotFolder:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotFolder</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyName:=&quot;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyFolder:=&quot;</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;StreamlinePlot:=&quot;</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;AdjacentSidePlot:=&quot;</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;FullModelPlot:=&quot;</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;IntrinsicVar:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">intrinsicVar</span><span class="p">,</span>
            <span class="s2">&quot;PlotGeomInfo:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotGeomInfo</span><span class="p">,</span>
            <span class="s2">&quot;FilterBoxes:=&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotsettings</span><span class="p">,</span>
            <span class="s2">&quot;EnableGaussianSmoothing:=&quot;</span><span class="p">,</span>
            <span class="kc">False</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">surfacePlotInstructionLineTraces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Surface plot settings for field line traces.</span>

<span class="sd">        ..note::</span>
<span class="sd">            ``Specify seeding points on selections`` is by default set to &#39;&#39;by sampling&#39;&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of plot settings for line traces.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s2">&quot;NAME:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;SolutionName:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solutionName</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyName:=&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyFolder:=&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;QuantityName:=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;QuantityName_FieldLineTrace&quot;</span><span class="p">,</span>
            <span class="s2">&quot;PlotFolder:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotFolder</span><span class="p">,</span>
            <span class="s2">&quot;IntrinsicVar:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">intrinsicVar</span><span class="p">,</span>
            <span class="s2">&quot;Trace Step Length:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">TraceStepLength</span><span class="p">,</span>
            <span class="s2">&quot;Use Adaptive Step:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">UseAdaptiveStep</span><span class="p">,</span>
            <span class="s2">&quot;Seeding Faces:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">,</span>
            <span class="s2">&quot;Seeding Markers:=&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;Surface Tracing Objects:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">,</span>
            <span class="s2">&quot;Volume Tracing Objects:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">,</span>
            <span class="s2">&quot;Seeding Sampling Option:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SeedingSamplingOption</span><span class="p">,</span>
            <span class="s2">&quot;Seeding Points Number:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SeedingPointsNumber</span><span class="p">,</span>
            <span class="s2">&quot;Fractional of Maximal:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FractionOfMaximum</span><span class="p">,</span>
            <span class="s2">&quot;Discrete Seeds Option:=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Marker Point&quot;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s2">&quot;NAME:InceptionEvaluationSettings&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Gas Type:=&quot;</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;Gas Pressure:=&quot;</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;Use Inception:=&quot;</span><span class="p">,</span>
                <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;Potential U0:=&quot;</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;Potential K:=&quot;</span><span class="p">,</span>
                <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;Potential A:=&quot;</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">field_line_trace_plot_settings</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_plot_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Field Plot Settings.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            Field Plot Settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s2">&quot;NAME:FieldsPlotItemSettings&quot;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s2">&quot;NAME:PlotOnSurfaceSettings&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Filled:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Filled</span><span class="p">,</span>
                <span class="s2">&quot;IsoValType:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">IsoVal</span><span class="p">,</span>
                <span class="s2">&quot;AddGrid:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">AddGrid</span><span class="p">,</span>
                <span class="s2">&quot;MapTransparency:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">MapTransparency</span><span class="p">,</span>
                <span class="s2">&quot;Refinement:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Refinement</span><span class="p">,</span>
                <span class="s2">&quot;Transparency:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Transparency</span><span class="p">,</span>
                <span class="s2">&quot;SmoothingLevel:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SmoothingLevel</span><span class="p">,</span>
                <span class="s2">&quot;ShadingType:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">SmoothShade</span><span class="p">,</span>
                <span class="p">[</span>
                    <span class="s2">&quot;NAME:Arrow3DSpacingSettings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ArrowUniform:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ArrowUniform</span><span class="p">,</span>
                    <span class="s2">&quot;ArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ArrowSpacing</span><span class="p">,</span>
                    <span class="s2">&quot;MinArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MinArrowSpacing</span><span class="p">,</span>
                    <span class="s2">&quot;MaxArrowSpacing:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">MaxArrowSpacing</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="s2">&quot;GridColor:=&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">GridColor</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">field_line_trace_plot_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Settings for the field line traces in the plot.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            List of settings for the field line traces in the plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="s2">&quot;NAME:FieldLineTracePlotSettings&quot;</span><span class="p">,</span>
            <span class="p">[</span><span class="s2">&quot;NAME:LineSettingsID&quot;</span><span class="p">,</span> <span class="s2">&quot;Width:=&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LineWidth</span><span class="p">,</span> <span class="s2">&quot;Style:=&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">LineStyle</span><span class="p">],</span>
            <span class="s2">&quot;IsoValType:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">IsoValType</span><span class="p">,</span>
        <span class="p">]</span>

<div class="viewcode-block" id="FieldPlot.create"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.create.html#pyaedt.modules.solutions.FieldPlot.create">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a field plot.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` when successful, ``False`` when failed.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">CreateFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">surfacePlotInstructionLineTraces</span><span class="p">,</span> <span class="s2">&quot;FieldLineTrace&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">CreateFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">surfacePlotInstruction</span><span class="p">,</span> <span class="s2">&quot;Field&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="FieldPlot.update"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.update.html#pyaedt.modules.solutions.FieldPlot.update">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the field plot.</span>

<span class="sd">        .. note::</span>
<span class="sd">           This method works on any plot created inside PyAEDT.</span>
<span class="sd">           For Plot already existing in AEDT Design it may produce incorrect results.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` when successful, ``False`` when failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Provide valid object id for seeding faces.&quot;</span><span class="p">)</span>
                            <span class="k">return</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">face</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid object id.&quot;</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">face</span><span class="p">)</span>
                                <span class="k">return</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seeding_faces</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Provide valid object id for in-volume object.&quot;</span><span class="p">)</span>
                            <span class="k">return</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid object id.&quot;</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                                <span class="k">return</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volume_indexes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Provide valid object id for surface object.&quot;</span><span class="p">)</span>
                            <span class="k">return</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">modeler</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid object id.&quot;</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                                <span class="k">return</span> <span class="kc">False</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">surfaces_indexes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">ModifyFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfacePlotInstructionLineTraces</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">ModifyFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">surfacePlotInstruction</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="FieldPlot.update_field_plot_settings"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.update_field_plot_settings.html#pyaedt.modules.solutions.FieldPlot.update_field_plot_settings">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update_field_plot_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modify the field plot settings.</span>

<span class="sd">        .. note::</span>
<span class="sd">            This method is not available for field plot line traces.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` when successful, ``False`` when failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">SetFieldPlotSettings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;NAME:FieldsPlotItemSettings&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotsettings</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FieldPlot.delete"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.delete.html#pyaedt.modules.solutions.FieldPlot.delete">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the field plot.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">DeleteFieldPlot</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">field_plots</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="FieldPlot.change_plot_scale"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.change_plot_scale.html#pyaedt.modules.solutions.FieldPlot.change_plot_scale">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">change_plot_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minimum_value</span><span class="p">,</span> <span class="n">maximum_value</span><span class="p">,</span> <span class="n">is_log</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_db</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change Field Plot Scale.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        minimum_value : str, float</span>
<span class="sd">            Minimum value of the scale.</span>
<span class="sd">        maximum_value : str, float</span>
<span class="sd">            Maximum value of the scale.</span>
<span class="sd">        is_log : bool, optional</span>
<span class="sd">            Set to ``True`` if Log Scale is setup.</span>
<span class="sd">        is_db : bool, optional</span>
<span class="sd">            Set to ``True`` if dB Scale is setup.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` if successful.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>

<span class="sd">        &gt;&gt;&gt; oModule.SetPlotFolderSettings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NAME:FieldsPlotSettings&quot;</span><span class="p">,</span> <span class="s2">&quot;Real Time mode:=&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
        <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="s2">&quot;NAME:ColorMaPSettings&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ColorMapType:=&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Spectrum&quot;</span><span class="p">,</span>
                <span class="s2">&quot;SpectrumType:=&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Rainbow&quot;</span><span class="p">,</span>
                <span class="s2">&quot;UniformColor:=&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="mi">127</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span>
                <span class="s2">&quot;RampColor:=&quot;</span><span class="p">,</span>
                <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">127</span><span class="p">],</span>
            <span class="p">]</span>
        <span class="p">]</span>
        <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="s2">&quot;NAME:Scale3DSettings&quot;</span><span class="p">,</span>
                <span class="s2">&quot;minvalue:=&quot;</span><span class="p">,</span>
                <span class="n">minimum_value</span><span class="p">,</span>
                <span class="s2">&quot;maxvalue:=&quot;</span><span class="p">,</span>
                <span class="n">maximum_value</span><span class="p">,</span>
                <span class="s2">&quot;log:=&quot;</span><span class="p">,</span>
                <span class="ow">not</span> <span class="n">is_log</span><span class="p">,</span>
                <span class="s2">&quot;dB:=&quot;</span><span class="p">,</span>
                <span class="n">is_db</span><span class="p">,</span>
                <span class="s2">&quot;ScaleType:=&quot;</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">SetPlotFolderSettings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotFolder</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="FieldPlot.export_image"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.export_image.html#pyaedt.modules.solutions.FieldPlot.export_image">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">export_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">full_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1920</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1080</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s2">&quot;isometric&quot;</span><span class="p">,</span> <span class="n">display_wireframe</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Export the active plot to an image file.</span>

<span class="sd">        .. note::</span>
<span class="sd">           There are some limitations on HFSS 3D Layout plots.</span>

<span class="sd">        full_path : str, optional</span>
<span class="sd">            Path for saving the image file. PNG and GIF formats are supported.</span>
<span class="sd">            The default is ``None`` which export file in working_directory.</span>
<span class="sd">        width : int, optional</span>
<span class="sd">            Plot Width.</span>
<span class="sd">        height : int, optional</span>
<span class="sd">            Plot height.</span>
<span class="sd">        orientation : str, optional</span>
<span class="sd">            View of the exported plot. Options are ``isometric``,</span>
<span class="sd">            ``top``, ``bottom``, ``right``, ``left``, ``front``,</span>
<span class="sd">            ``back``, and any custom orientation.</span>
<span class="sd">        display_wireframe : bool, optional</span>
<span class="sd">            Set to ``True`` if the objects has to be put in wireframe mode.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Full path to exported file if successful.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>

<span class="sd">        &gt;&gt;&gt; oModule.ExportPlotImageToFile</span>
<span class="sd">        &gt;&gt;&gt; oModule.ExportModelImageToFile</span>
<span class="sd">        &gt;&gt;&gt; oModule.ExportPlotImageWithViewToFile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oField</span><span class="o">.</span><span class="n">UpdateQuantityFieldsPlots</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotFolder</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">full_path</span><span class="p">:</span>
            <span class="n">full_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">working_directory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.png&quot;</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">export_field_jpg</span><span class="p">(</span>
            <span class="n">full_path</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotFolder</span><span class="p">,</span>
            <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
            <span class="n">display_wireframe</span><span class="o">=</span><span class="n">display_wireframe</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">full_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="FieldPlot.export_image_from_aedtplt"><a class="viewcode-back" href="../../../API/_autosummary/pyaedt.modules.solutions.FieldPlot.export_image_from_aedtplt.html#pyaedt.modules.solutions.FieldPlot.export_image_from_aedtplt">[docs]</a>    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">export_image_from_aedtplt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">export_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s2">&quot;isometric&quot;</span><span class="p">,</span> <span class="n">plot_mesh</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">scale_min</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale_max</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save an image of the active plot using PyVista.</span>

<span class="sd">        .. note::</span>
<span class="sd">            This method only works if the CPython with PyVista module is installed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        export_path : str, optional</span>
<span class="sd">            Path where image will be saved.</span>
<span class="sd">            The default is ``None`` which export file in working_directory.</span>
<span class="sd">        view : str, optional</span>
<span class="sd">           View to export. Options are ``&quot;isometric&quot;``, ``&quot;xy&quot;``, ``&quot;xz&quot;``, ``&quot;yz&quot;``.</span>
<span class="sd">        plot_mesh : bool, optional</span>
<span class="sd">            Plot mesh.</span>
<span class="sd">        scale_min : float, optional</span>
<span class="sd">            Scale output min.</span>
<span class="sd">        scale_max : float, optional</span>
<span class="sd">            Scale output max.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Full path to exported file if successful.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>

<span class="sd">        &gt;&gt;&gt; oModule.UpdateAllFieldsPlots</span>
<span class="sd">        &gt;&gt;&gt; oModule.UpdateQuantityFieldsPlots</span>
<span class="sd">        &gt;&gt;&gt; oModule.ExportFieldPlot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">export_path</span><span class="p">:</span>
            <span class="n">export_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">working_directory</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">plot_field_from_fieldplot</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">project_path</span><span class="o">=</span><span class="n">export_path</span><span class="p">,</span>
                <span class="n">meshplot</span><span class="o">=</span><span class="n">plot_mesh</span><span class="p">,</span>
                <span class="n">imageformat</span><span class="o">=</span><span class="s2">&quot;jpg&quot;</span><span class="p">,</span>
                <span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">,</span>
                <span class="n">plot_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">quantityName</span><span class="p">,</span>
                <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">scale_min</span><span class="o">=</span><span class="n">scale_min</span><span class="p">,</span>
                <span class="n">scale_max</span><span class="o">=</span><span class="n">scale_max</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This method works only on CPython with PyVista&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div></div>


<span class="k">class</span> <span class="nc">VRTFieldPlot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates and edits VRT field plots for SBR+ and Creeping Waves.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    postprocessor : :class:`pyaedt.modules.PostProcessor.PostProcessor`</span>

<span class="sd">    objlist : list</span>
<span class="sd">        List of objects.</span>
<span class="sd">    solutionName : str</span>
<span class="sd">        Name of the solution.</span>
<span class="sd">    quantity_name : str</span>
<span class="sd">        Name of the plot or the name of the object.</span>
<span class="sd">    intrinsincList : dict, optional</span>
<span class="sd">        Name of the intrinsic dictionary. The default is ``{}``.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">postprocessor</span><span class="p">,</span>
        <span class="n">is_creeping_wave</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">quantity_name</span><span class="o">=</span><span class="s2">&quot;QuantityName_SBR&quot;</span><span class="p">,</span>
        <span class="n">max_frequency</span><span class="o">=</span><span class="s2">&quot;1GHz&quot;</span><span class="p">,</span>
        <span class="n">ray_density</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">bounces</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">intrinsincList</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_creeping_wave</span> <span class="o">=</span> <span class="n">is_creeping_wave</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span> <span class="o">=</span> <span class="n">postprocessor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span> <span class="o">=</span> <span class="n">postprocessor</span><span class="o">.</span><span class="n">ofieldsreporter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity_name</span> <span class="o">=</span> <span class="n">quantity_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span> <span class="o">=</span> <span class="n">intrinsincList</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Field_Plot&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_folder</span> <span class="o">=</span> <span class="s2">&quot;Field_Plot&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_frequency</span> <span class="o">=</span> <span class="n">max_frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ray_density</span> <span class="o">=</span> <span class="n">ray_density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_bounces</span> <span class="o">=</span> <span class="n">bounces</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multi_bounce_ray_density_control</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mbrd_max_subdivision</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shoot_utd_rays</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shoot_type</span> <span class="o">=</span> <span class="s2">&quot;All Rays&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_index</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_index</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_plane_wave</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incident_theta</span> <span class="o">=</span> <span class="s2">&quot;0deg&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incident_phi</span> <span class="o">=</span> <span class="s2">&quot;0deg&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertical_polarization</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_location</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ray_box</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ray_elevation</span> <span class="o">=</span> <span class="s2">&quot;0deg&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ray_azimuth</span> <span class="o">=</span> <span class="s2">&quot;0deg&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_coordinatesystem</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ray_cutoff</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_density</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">irregular_surface_tolerance</span> <span class="o">=</span> <span class="mi">50</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">intrinsicVar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Intrinsic variable.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list or dict</span>
<span class="sd">            List or dictionary of the variables for the field plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">var</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="s2">&quot;:=&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">ll</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:=&quot;</span><span class="p">)</span>
                <span class="n">var</span> <span class="o">+=</span> <span class="n">ll</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;=&#39;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39; &quot;</span>
                <span class="n">l</span> <span class="o">+=</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">:</span>
                <span class="n">var</span> <span class="o">+=</span> <span class="n">a</span> <span class="o">+</span> <span class="s2">&quot;=&#39;&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intrinsics</span><span class="p">[</span><span class="n">a</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&#39; &quot;</span>
        <span class="k">return</span> <span class="n">var</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_create_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;NAME:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyName:=&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyFolder:=&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;QuantityName:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">quantity_name</span><span class="p">,</span>
            <span class="s2">&quot;PlotFolder:=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Visual Ray Trace SBR&quot;</span><span class="p">,</span>
            <span class="s2">&quot;IntrinsicVar:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">intrinsicVar</span><span class="p">,</span>
            <span class="s2">&quot;MaxFrequency:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_frequency</span><span class="p">,</span>
            <span class="s2">&quot;RayDensity:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ray_density</span><span class="p">,</span>
            <span class="s2">&quot;NumberBounces:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">number_of_bounces</span><span class="p">,</span>
            <span class="s2">&quot;Multi-Bounce Ray Density Control:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">multi_bounce_ray_density_control</span><span class="p">,</span>
            <span class="s2">&quot;MBRD Max sub divisions:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mbrd_max_subdivision</span><span class="p">,</span>
            <span class="s2">&quot;Shoot UTD Rays:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shoot_utd_rays</span><span class="p">,</span>
            <span class="s2">&quot;ShootFilterType:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shoot_type</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shoot_type</span> <span class="o">==</span> <span class="s2">&quot;Rays by index&quot;</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;start index:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">start_index</span><span class="p">,</span>
                    <span class="s2">&quot;stop index:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stop_index</span><span class="p">,</span>
                    <span class="s2">&quot;index step:=&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">step_index</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">shoot_type</span> <span class="o">==</span> <span class="s2">&quot;Rays in box&quot;</span><span class="p">:</span>
            <span class="n">box_id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ray_box</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ray_box</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ray_box</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_primitives</span><span class="o">.</span><span class="n">_object_names_to_ids</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ray_box</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">box_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ray_box</span><span class="o">.</span><span class="n">id</span>
            <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;FilterBoxID:=&quot;</span><span class="p">,</span> <span class="n">box_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">shoot_type</span> <span class="o">==</span> <span class="s2">&quot;Single ray&quot;</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s2">&quot;Ray elevation:=&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ray_elevation</span><span class="p">,</span> <span class="s2">&quot;Ray azimuth:=&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ray_azimuth</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;LaunchFrom:=&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_plane_wave</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Launch from Plane-Wave&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Incident direction theta:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">incident_theta</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Incident direction phi:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">incident_phi</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Vertical Incident Polarization:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_polarization</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Launch from Custom&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;LaunchFromPointID:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CustomLocationCoordSystem:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_coordinatesystem</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CustomLocation:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_location</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_create_args_creeping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;NAME:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyName:=&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;UserSpecifyFolder:=&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;QuantityName:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">quantity_name</span><span class="p">,</span>
            <span class="s2">&quot;PlotFolder:=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Visual Ray Trace CW&quot;</span><span class="p">,</span>
            <span class="s2">&quot;IntrinsicVar:=&quot;</span><span class="p">,</span>
            <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MaxFrequency:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">max_frequency</span><span class="p">,</span>
            <span class="s2">&quot;SampleDensity:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample_density</span><span class="p">,</span>
            <span class="s2">&quot;RayCutOff:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ray_cutoff</span><span class="p">,</span>
            <span class="s2">&quot;Irregular Surface Tolerance:=&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">irregular_surface_tolerance</span><span class="p">,</span>
            <span class="s2">&quot;LaunchFrom:=&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_plane_wave</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Launch from Plane-Wave&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Incident direction theta:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">incident_theta</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Incident direction phi:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">incident_phi</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Vertical Incident Polarization:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vertical_polarization</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Launch from Custom&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;LaunchFromPointID:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CustomLocationCoordSystem:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_coordinatesystem</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CustomLocation:=&quot;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_location</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;SBRRayDensity:=&quot;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ray_density</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a field plot.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` when successful, ``False`` when failed.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_creeping_wave</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span><span class="o">.</span><span class="n">CreateFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_create_args_creeping</span><span class="p">(),</span> <span class="s2">&quot;CreepingWave_VRT&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span><span class="o">.</span><span class="n">CreateFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_create_args</span><span class="p">(),</span> <span class="s2">&quot;VRT&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the field plot.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            ``True`` when successful, ``False`` when failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_creeping_wave</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span><span class="o">.</span><span class="n">ModifyFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_args_creeping</span><span class="p">())</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span><span class="o">.</span><span class="n">ModifyFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_args</span><span class="p">())</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete the field plot.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span><span class="o">.</span><span class="n">DeleteFieldPlot</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@pyaedt_function_handler</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path_to_hdm_file</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Export the Visual Ray Tracing to ``hdm`` file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path_to_hdm_file : str, optional</span>
<span class="sd">            Full path to output file. If ``None``, the file will be exported in working directory.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Path to the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path_to_hdm_file</span><span class="p">:</span>
            <span class="n">path_to_hdm_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_postprocessor</span><span class="o">.</span><span class="n">_app</span><span class="o">.</span><span class="n">working_directory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;.hdm&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ofield</span><span class="o">.</span><span class="n">ExportFieldPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">path_to_hdm_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path_to_hdm_file</span>
</pre></div>

              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2023 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>